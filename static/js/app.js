import{d as J,c as h,a as j,b as f,D as ne,m as F,S as G,e as he,u as _e,s as Q,f as le,o as ce,g as p,i as E,h as B,t as C,j as ue,k as Y,l as q,n as me,p as de,q as $e,F as ye,r as be,I as we}from"./vendor.js";J(["click"]);const fe=he();function Ce(e){const t=_e(fe);if(t)return t;throw new Error(`<${e}> must be used inside a <Transition>`)}function P(e,t){const n=t.filter(s=>s);n.length&&e.classList.add(...n)}function D(e,t){const n=t.filter(s=>s);n.length&&e.classList.remove(...n)}function ie(e){const t=Ce("TransitionChild"),[n,s]=h(t.show),[l,i]=h();let a=!0;function _(o,d){var c,v,m,T,N,z,I,O,R,u,g,$,A,K,U,Z,r,b;if(d){if(a){const w=(v=(c=e.enter)==null?void 0:c.split(" "))!=null?v:[],L=(T=(m=e.enterFrom)==null?void 0:m.split(" "))!=null?T:[],y=(z=(N=e.enterTo)==null?void 0:N.split(" "))!=null?z:[],x=(O=(I=e.entered)==null?void 0:I.split(" "))!=null?O:[],M=()=>{var S;D(o,w),D(o,y),P(o,x),(S=e.afterEnter)==null||S.call(e)};(R=e.beforeEnter)==null||R.call(e),P(o,w),P(o,L),requestAnimationFrame(()=>{D(o,L),P(o,y),o.addEventListener("transitionend",M,{once:!0}),o.addEventListener("animationend",M,{once:!0})})}}else{const w=(g=(u=e.leave)==null?void 0:u.split(" "))!=null?g:[],L=(A=($=e.leaveFrom)==null?void 0:$.split(" "))!=null?A:[],y=(U=(K=e.leaveTo)==null?void 0:K.split(" "))!=null?U:[],x=(r=(Z=e.entered)==null?void 0:Z.split(" "))!=null?r:[];(b=e.beforeLeave)==null||b.call(e),D(o,x),P(o,w),P(o,L),requestAnimationFrame(()=>{D(o,L),P(o,y)});const M=()=>{var S;D(o,w),D(o,y),s(!1),(S=e.afterLeave)==null||S.call(e)};o.addEventListener("transitionend",M,{once:!0}),o.addEventListener("animationend",M,{once:!0})}}return j(()=>{const o=t.show;o&&s(!0);const d=l();d instanceof HTMLElement?_(d,o):a=!0}),f(G,{get when(){var o;return(o=e.unmount)!=null?o:!0},get fallback(){return f(ne,F({get component(){var o;return(o=e.as)!=null?o:"div"}},()=>oe(e,["as","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","unmount","afterEnter","afterLeave","appear","beforeEnter","beforeLeave","entered","ref"]),{ref(o){const d=se(e,c=>{i(()=>c)});typeof d=="function"&&d(o)},get children(){return e.children}}))},get children(){return f(G,{get when(){return n()},get children(){return f(ne,F({get component(){var o;return(o=e.as)!=null?o:"div"}},()=>oe(e,["as","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","unmount","afterEnter","afterLeave","appear","beforeEnter","beforeLeave","entered","ref"]),{ref(o){const d=se(e,c=>{i(()=>c)});typeof d=="function"&&d(o)},get children(){return e.children}}))}})}})}function ke(e){const t=oe(e,["show"]);return f(fe.Provider,{value:{get show(){return e.show}},get children(){return f(ie,t)}})}function Ee(e){return typeof e=="function"}function se(e,t){return n=>{"ref"in e&&Ee(e.ref)&&e.ref(n),t(n)}}function oe(e,t){const n={},s=Object.keys(e);for(let l=0,i=s.length;l<i;l+=1){const a=s[l];t.includes(a)||Object.defineProperty(n,a,{get(){return e[a]},configurable:!0,enumerable:!0})}return n}const W=new Set;let V=null,te=null;function Le(){return{registerModal:xe,unregisterModal:Se,trapFocus:Ae}}function xe(e){W.has(e)||(W.add(e),W.size===1&&(Fe(),document.body.style.overflow="hidden"))}function Se(e){!W.has(e)||(W.delete(e),W.size===0&&(Te(),document.body.style.overflow=""))}function qe(){return window.innerWidth>document.documentElement.clientWidth}function Fe(){!qe()||(V=[document.body,...Array.from(document.querySelectorAll("[data-fixed]"))],V.forEach(e=>{const t=e.getAttribute("data-fixed")||"padding",n=e.style[`${t}Right`],s=getComputedStyle(e)[`${t}Right`];e.setAttribute(`data-${t}-right`,n),e.style[`${t}Right`]=`${parseFloat(s)+Oe()}px`}))}function Te(){V!==null&&(V.forEach(e=>{const t=e.getAttribute("data-fixed")||"padding";e.style[`${t}Right`]=e.getAttribute(`data-${t}-right`),e.removeAttribute(`data-${t}-right`)}),V=null)}function Oe(){if(te===null){const e=document.createElement("div");e.style.cssText=`
      width: 100px;
      height: 100px;
      position: absolute;
      overflow: scroll;
      top: -9999px`,document.body.appendChild(e),te=e.getBoundingClientRect().width-e.clientWidth,document.body.removeChild(e)}return te}function Re(e){const t=["a[href]","area[href]",'input:not([type="hidden"]):not([type="radio"]):not([disabled])','input[type="radio"]:not([disabled]):checked',"select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","audio[controls]","video[controls]","[contenteditable]","[tabindex]"].map(n=>`${n}:not([tabindex^="-"])`).join(", ");return Array.from(e.querySelectorAll(t)).filter(n=>n.offsetWidth||n.offsetHeight||n.getClientRects().length)}function Ae(e){if(e.key!=="Tab")return;const t=Re(e.currentTarget);if(t.length===0){e.preventDefault();return}const n=t[0],s=t[t.length-1],l=document.activeElement;e.shiftKey?(l===n||l===e.currentTarget)&&(s.focus(),e.preventDefault()):l===s&&(n.focus(),e.preventDefault())}const Me=C('<div class="dialog__content"></div>'),Pe=C('<div class="dialog" role="dialog" aria-modal="true" tabindex="-1"></div>');function ve(e){e=F({open:!1,closeOnBackdrop:!0,closeOnEscape:!0},e);const[,t]=Q(e,["class","classList","open","closeOnBackdrop","closeOnEscape","children","variant","onOpen","onOpened","onClose","onClosed","onRequestClose"]),[n,s]=h(!1),l=le(()=>e.open&&n()),{registerModal:i,unregisterModal:a,trapFocus:_}=Le();let o,d,c=null;const v={};async function m(){var u;(u=e.onOpen)==null||u.call(e),queueMicrotask(()=>{c=c||document.activeElement,i(v)})}function T(){var u;(u=e.onOpened)==null||u.call(e),R()}function N(){var u;(u=e.onClose)==null||u.call(e)}async function z(){var u,g;(u=e.onClosed)==null||u.call(e),(g=c.focus)==null||g.call(c,{preventScroll:!0}),c=null,a(v)}function I(u){var g;e.closeOnBackdrop&&!d.contains(u.target)&&((g=e.onRequestClose)==null||g.call(e))}function O(u){var g;e.closeOnEscape&&u.key==="Escape"&&((g=e.onRequestClose)==null||g.call(e))}function R(){o.contains(document.activeElement)||o.focus()}return ce(()=>{s(!0),Y(()=>{a(v)})}),f(ke,{get show(){return l()},as:"span",get children(){return[f(ie,{class:"dialog-backdrop",get classList(){return{[`dialog-backdrop_${e.variant}`]:Boolean(e.variant)}},enter:"dialog-backdrop_enter",enterFrom:"dialog-backdrop_out",enterTo:"dialog-backdrop_in",leave:"dialog-backdrop_leave",leaveFrom:"dialog-backdrop_in",leaveTo:"dialog-backdrop_out"}),(()=>{const u=Pe.cloneNode(!0);u.$$keydown=$=>{O($),_($)},u.$$click=I;const g=o;return typeof g=="function"?g(u):o=u,p(u,t,!1,!0),E(u,f(ie,{class:"dialog__wrapper",enter:"dialog__wrapper_enter",enterFrom:"dialog__wrapper_out",enterTo:"dialog__wrapper_in",leave:"dialog__wrapper_leave",leaveFrom:"dialog__wrapper_in",leaveTo:"dialog__wrapper_out",beforeEnter:m,afterEnter:T,beforeLeave:N,afterLeave:z,get children(){const $=Me.cloneNode(!0),A=d;return typeof A=="function"?A($):d=$,E($,()=>e.children),$}})),B($=>ue(u,{[`dialog_${e.variant}`]:Boolean(e.variant),[e.class]:Boolean(e.class),...e.classList},$)),u})()]}})}J(["click","keydown"]);const De=C('<svg viewBox="0 0 22 22" fill="currentColor"><path d="m17.42 5.88-1.3-1.3L11 9.71 5.88 4.58l-1.3 1.3L9.71 11l-5.13 5.12 1.3 1.3L11 12.29l5.12 5.13 1.3-1.3L12.29 11l5.13-5.12Z"></path></svg>'),Be=(e={})=>(()=>{const t=De.cloneNode(!0);return p(t,e,!0,!0),t})();function Ne(e,t){const[n,s]=h(0),l=()=>typeof e=="function"?e():e,i=()=>typeof t=="function"?t():t;let a=0;return j(()=>{if(l()){let v=function(m){d||(d=m),c=m-d,s(Math.min((c+a)/_,1)),c+a<_&&(o=requestAnimationFrame(v))};const _=i();let o=null,d=null,c=0;o=requestAnimationFrame(v),Y(()=>{cancelAnimationFrame(o),a+=c})}}),n}const ze=C('<img alt="#">');function Ie(e){const[t,n]=h(!1),s=le(()=>e.playing&&t()),l=Ne(s,5e3);return j(()=>{var i;return(i=e.onProgress)==null?void 0:i.call(e,l())}),(()=>{const i=ze.cloneNode(!0);return i.addEventListener("load",()=>{var a;(a=e.onLoad)==null||a.call(e),n(!0)}),B(()=>q(i,"src",e.src)),i})()}function We(){const[e,t]=h(null),[n,s]=h(0);return j(()=>{const l=e();if(l){let a=function(){cancelAnimationFrame(i),l.paused||(i=requestAnimationFrame(a)),_()},_=function(){l.duration&&s(l.currentTime/l.duration)},i=null;l.addEventListener("timeupdate",a),Y(()=>{cancelAnimationFrame(i),l.removeEventListener("timeupdate",a)})}}),[t,n]}const je=C("<video playsinline disablepictureinpicture></video>");function Xe(e){let t;const[n,s]=We();j(()=>{var i;return(i=e.onProgress)==null?void 0:i.call(e,s())}),j(()=>e.playing?t.play():t.pause());function l(){var i;(i=e.onLoad)==null||i.call(e),t.play().then(()=>t.pause()),setTimeout(()=>t.play().catch(console.error),1e3),setTimeout(()=>{},1e3)}return(()=>{const i=je.cloneNode(!0);return(a=>{t=a,n(a)})(i),i.addEventListener("canplaythrough",l),i.addEventListener("canplay",l),B(()=>q(i,"src",e.src)),i})()}const He=C('<div class="spinner" role="progressbar"><svg class="spinner__svg" fill="transparent"><circle class="spinner__circle" cx="50%" cy="50%" stroke="currentColor"></circle><circle class="spinner__circle " cx="50%" cy="50%" stroke="currentColor" pathLength="1" stroke-dasharray="0.4 0.6"></circle></svg></div>');function Ve(e){e=F({size:40,thickness:4},e);const[,t]=Q(e,["size","thickness","class","classList","style"]);return(()=>{const n=He.cloneNode(!0),s=n.firstChild,l=s.firstChild,i=l.nextSibling;return p(n,t,!1,!0),B(a=>{const _={[e.class]:Boolean(e.class),...e.classList},o={...e.style,width:`${e.size}px`,height:`${e.size}px`},d=`${(e.size-e.thickness)/2}px`,c=`${e.thickness}px`,v=`${(e.size-e.thickness)/2}px`,m=`${e.thickness}px`;return a._v$=ue(n,_,a._v$),a._v$2=me(n,o,a._v$2),d!==a._v$3&&q(l,"r",a._v$3=d),c!==a._v$4&&q(l,"stroke-width",a._v$4=c),v!==a._v$5&&q(i,"r",a._v$5=v),m!==a._v$6&&q(i,"stroke-width",a._v$6=m),a},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),n})()}const Ye=C('<svg viewBox="0 0 20 20" fill="currentColor"><path d="M2.5 16.67 18.07 10 2.5 3.33v5.19L13.61 10 2.5 11.48v5.19Z"></path></svg>'),ae=(e={})=>(()=>{const t=Ye.cloneNode(!0);return p(t,e,!0,!0),t})();const Ke=C('<div class="story"></div>'),Ue=C('<a target="_blank" class="story__button">\u041E\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u0437\u0430\u044F\u0432\u043A\u0443 </a>'),Ze=C('<button type="button" class="story__button">\u041E\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u0437\u0430\u044F\u0432\u043A\u0443 </button>');function Ge(e){const[,t]=Q(e,["onRequestForm"]),[n,s]=h(!1);return(()=>{const l=Ke.cloneNode(!0);return E(l,f(ne,F({get component(){return e.type==="image"?Ie:Xe}},t,{onLoad:()=>s(!0)})),null),E(l,f(G,{get when(){return n()},get fallback(){return f(Ve,{class:"story__spinner",size:36,thickness:2})},get children(){return de(()=>!!e.link,!0)()?(()=>{const i=Ue.cloneNode(!0);return i.firstChild,E(i,f(ae,{}),null),B(()=>q(i,"href",e.link)),i})():(()=>{const i=Ze.cloneNode(!0);return i.firstChild,$e(i,"click",e.onRequestForm,!0),E(i,f(ae,{}),null),i})()}}),null),l})()}J(["click"]);const Je=C('<div class="form"></div>');function Qe(e){function t(n){const s=document.querySelector(".request"),l=s.parentElement;n.appendChild(s),Y(()=>{l.appendChild(s)})}return f(ve,F({variant:"form"},e,{get children(){const n=Je.cloneNode(!0),s=t;return typeof s=="function"?s(n):t=n,n}}))}const pe=C('<div class="stories"><div class="stories__header"><div class="stories__bars"></div><div class="stories__row"><div class="stories__user"><img alt="" class="stories__ava"><div class="stories__info"><h3 class="stories__username"></h3><time class="stories__time"></time></div></div><button type="button" class="stories__close" aria-label="\u0417\u0430\u043A\u0440\u044B\u0442\u044C \u0441\u0442\u043E\u0440\u0438\u0441"></button></div></div><div class="stories__overlay"></div></div>'),et=C('<div class="stories__bar"></div>');function tt(e){const[,t]=Q(e,["ava","username","time","stories","onOpen","onOpened","onClose","onClosed"]),[n,s]=h(0),[l,i]=h(!0),[a,_]=h(0),[o,d]=h(!1),[c,v]=h(!1);function m(){s((n()+1)%e.stories.length)}function T(){s((n()-1+e.stories.length)%e.stories.length)}function N(r){_(r),r===1&&m()}const[z,I]=h(0);ce(()=>{function r(){I(document.documentElement.clientHeight)}r(),window.addEventListener("resize",r),Y(()=>{window.removeEventListener("resize",r)})});var O,R,u,g=50,$=250;function A(r){r.target.setPointerCapture(r.pointerId),O=r.clientX,R=r.clientY,u=Date.now(),r.preventDefault()}function K(r){r.preventDefault()}function U(r){var x;const b=r.clientX-O,w=r.clientY-R,L=Date.now()-u;let y="none";L<=$&&(Math.abs(b)>=g&&Math.abs(b)>Math.abs(w)?y=b<0?"left":"right":Math.abs(w)>=g&&Math.abs(w)>Math.abs(b)&&(y=w<0?"up":"down")),y==="left"?m():y==="right"?T():y==="down"?(x=e.onRequestClose)==null||x.call(e):Z(r),r.preventDefault()}function Z(r){const b=r.currentTarget.getBoundingClientRect();r.clientX-b.left<b.width/2?T():m(),r.preventDefault()}return[f(ve,F(t,{variant:"stories",closeOnBackdrop:!1,onOpen:()=>{var r;(r=e.onOpen)==null||r.call(e)},onOpened:()=>{var r;d(!0),(r=e.onOpened)==null||r.call(e)},onClose:()=>{var r;i(!1),(r=e.onClose)==null||r.call(e)},onClosed:()=>{var r;s(0),d(!1),_(0),i(!0),(r=e.onClosed)==null||r.call(e)},get children(){const r=pe.cloneNode(!0),b=r.firstChild,w=b.firstChild,L=w.nextSibling,y=L.firstChild,x=y.firstChild,M=x.nextSibling,S=M.firstChild,ge=S.nextSibling,re=y.nextSibling,ee=b.nextSibling;return E(w,f(ye,{get each(){return e.stories},children:(k,X)=>(()=>{const H=et.cloneNode(!0);return B(()=>H.style.setProperty("--progress",X()<n()?1:X()===n()?a():0)),H})()})),E(S,()=>e.username),E(ge,()=>e.time),re.$$click=()=>{var k;return(k=e.onRequestClose)==null?void 0:k.call(e)},E(re,f(Be,{"aria-hidden":"true"})),ee.$$pointerup=U,ee.$$pointermove=K,ee.$$pointerdown=A,E(r,f(G,{get when(){return de(()=>!!o(),!0)()&&e.stories[n()]},keyed:!0,children:k=>f(Ge,F(k,{get playing(){return l()},onProgress:N,onRequestForm:()=>v(!0)}))}),null),B(k=>{const X=z(),H=e.ava;return X!==k._v$&&r.style.setProperty("--height",k._v$=X),H!==k._v$2&&q(x,"src",k._v$2=H),k},{_v$:void 0,_v$2:void 0}),r}})),f(Qe,{get open(){return c()},onRequestClose:()=>v(!1),onOpen:()=>i(!1),onClose:()=>i(!0)})]}J(["click","pointerdown","pointermove","pointerup"]);async function nt(){var d;const e=document.querySelector(".ava");if(!e)return;const t=((d=window.data)==null?void 0:d.stories)||[];t.length||e.classList.add("ava_empty");const n=e.querySelector("video.ava__media"),s=t.find(c=>c.type==="video");n&&s&&(n.src=s.src,n.addEventListener("canplaythrough",()=>{e.classList.add("ava_loaded")}));const[l,i]=h(!1),a=e.querySelector(".ava__stories");e.querySelector(".ava__picture").addEventListener("click",c=>{i(!0),c.preventDefault()}),e.querySelector(".ava__share").addEventListener("click",async()=>{var c;try{await navigator.share((c=window.data)==null?void 0:c.share)}catch(v){console.log(v)}}),be(()=>f(tt,{get ava(){var c;return(c=window.data)==null?void 0:c.ava},get username(){var c;return(c=window.data)==null?void 0:c.username},get time(){var c;return(c=window.data)==null?void 0:c.time},stories:t,get open(){return l()},onRequestClose:()=>i(!1),onOpen:()=>n==null?void 0:n.pause(),onClose:()=>n==null?void 0:n.play()}),a)}nt();function it(){const e=document.querySelector(".request");if(!e)return;e.querySelector(".request__form");const t=e.querySelector(".request__input");t.type==="tel"&&we(t,{mask:"+{7} 000 000 00-00"})}it();
