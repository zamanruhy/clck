import{d as K,c as $,a as D,b as v,D as Q,m as A,S as U,e as ce,u as de,s as Z,f as ie,o as re,g as G,i as S,h as N,t as L,j as I,k as oe,l as O,n as ue,p as ae,q as fe,F as ve,r as ge,I as _e}from"./vendor.js";K(["click"]);const se=ce();function he(e){const t=de(se);if(t)return t;throw new Error(`<${e}> must be used inside a <Transition>`)}function M(e,t){const n=t.filter(r=>r);n.length&&e.classList.add(...n)}function B(e,t){const n=t.filter(r=>r);n.length&&e.classList.remove(...n)}function p(e){const t=he("TransitionChild"),[n,r]=$(t.show),[s,i]=$();let a=!0;function h(o,u){var l,g,f,w,E,q,y,x,c,d,_,m,T,W,X,j,Y,H;if(u){if(a){const F=(g=(l=e.enter)==null?void 0:l.split(" "))!=null?g:[],R=(w=(f=e.enterFrom)==null?void 0:f.split(" "))!=null?w:[],P=(q=(E=e.enterTo)==null?void 0:E.split(" "))!=null?q:[],b=(x=(y=e.entered)==null?void 0:y.split(" "))!=null?x:[],k=()=>{var C;B(o,F),B(o,P),M(o,b),(C=e.afterEnter)==null||C.call(e)};(c=e.beforeEnter)==null||c.call(e),M(o,F),M(o,R),requestAnimationFrame(()=>{B(o,R),M(o,P),o.addEventListener("transitionend",k,{once:!0}),o.addEventListener("animationend",k,{once:!0})})}}else{const F=(_=(d=e.leave)==null?void 0:d.split(" "))!=null?_:[],R=(T=(m=e.leaveFrom)==null?void 0:m.split(" "))!=null?T:[],P=(X=(W=e.leaveTo)==null?void 0:W.split(" "))!=null?X:[],b=(Y=(j=e.entered)==null?void 0:j.split(" "))!=null?Y:[];(H=e.beforeLeave)==null||H.call(e),B(o,b),M(o,F),M(o,R),requestAnimationFrame(()=>{B(o,R),M(o,P)});const k=()=>{var C;B(o,F),B(o,P),r(!1),(C=e.afterLeave)==null||C.call(e)};o.addEventListener("transitionend",k,{once:!0}),o.addEventListener("animationend",k,{once:!0})}}return D(()=>{const o=t.show;o&&r(!0);const u=s();u instanceof HTMLElement?h(u,o):a=!0}),v(U,{get when(){var o;return(o=e.unmount)!=null?o:!0},get fallback(){return v(Q,A({get component(){var o;return(o=e.as)!=null?o:"div"}},()=>ee(e,["as","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","unmount","afterEnter","afterLeave","appear","beforeEnter","beforeLeave","entered","ref"]),{ref(o){const u=te(e,l=>{i(()=>l)});typeof u=="function"&&u(o)},get children(){return e.children}}))},get children(){return v(U,{get when(){return n()},get children(){return v(Q,A({get component(){var o;return(o=e.as)!=null?o:"div"}},()=>ee(e,["as","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","unmount","afterEnter","afterLeave","appear","beforeEnter","beforeLeave","entered","ref"]),{ref(o){const u=te(e,l=>{i(()=>l)});typeof u=="function"&&u(o)},get children(){return e.children}}))}})}})}function me(e){const t=ee(e,["show"]);return v(se.Provider,{value:{get show(){return e.show}},get children(){return v(p,t)}})}function $e(e){return typeof e=="function"}function te(e,t){return n=>{"ref"in e&&$e(e.ref)&&e.ref(n),t(n)}}function ee(e,t){const n={},r=Object.keys(e);for(let s=0,i=r.length;s<i;s+=1){const a=r[s];t.includes(a)||Object.defineProperty(n,a,{get(){return e[a]},configurable:!0,enumerable:!0})}return n}const z=new Set;let V=null,J=null;function ye(){return{registerModal:be,unregisterModal:we,trapFocus:xe}}function be(e){z.has(e)||(z.add(e),z.size===1&&(Ee(),document.body.style.overflow="hidden"))}function we(e){!z.has(e)||(z.delete(e),z.size===0&&(ke(),document.body.style.overflow=""))}function Le(){return window.innerWidth>document.documentElement.clientWidth}function Ee(){!Le()||(V=[document.body,...Array.from(document.querySelectorAll("[data-fixed]"))],V.forEach(e=>{const t=e.getAttribute("data-fixed")||"padding",n=e.style[`${t}Right`],r=getComputedStyle(e)[`${t}Right`];e.setAttribute(`data-${t}-right`,n),e.style[`${t}Right`]=`${parseFloat(r)+Ce()}px`}))}function ke(){V!==null&&(V.forEach(e=>{const t=e.getAttribute("data-fixed")||"padding";e.style[`${t}Right`]=e.getAttribute(`data-${t}-right`),e.removeAttribute(`data-${t}-right`)}),V=null)}function Ce(){if(J===null){const e=document.createElement("div");e.style.cssText=`
      width: 100px;
      height: 100px;
      position: absolute;
      overflow: scroll;
      top: -9999px`,document.body.appendChild(e),J=e.getBoundingClientRect().width-e.clientWidth,document.body.removeChild(e)}return J}function Se(e){const t=["a[href]","area[href]",'input:not([type="hidden"]):not([type="radio"]):not([disabled])','input[type="radio"]:not([disabled]):checked',"select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","audio[controls]","video[controls]","[contenteditable]","[tabindex]"].map(n=>`${n}:not([tabindex^="-"])`).join(", ");return Array.from(e.querySelectorAll(t)).filter(n=>n.offsetWidth||n.offsetHeight||n.getClientRects().length)}function xe(e){if(e.key!=="Tab")return;const t=Se(e.currentTarget);if(t.length===0){e.preventDefault();return}const n=t[0],r=t[t.length-1],s=document.activeElement;e.shiftKey?(s===n||s===e.currentTarget)&&(r.focus(),e.preventDefault()):s===r&&(n.focus(),e.preventDefault())}const qe=L('<div class="dialog__content"></div>'),Te=L('<div class="dialog" role="dialog" aria-modal="true" tabindex="-1"></div>');function le(e){e=A({open:!1,closeOnBackdrop:!0,closeOnEscape:!0},e);const[,t]=Z(e,["class","classList","open","closeOnBackdrop","closeOnEscape","children","variant","onOpen","onOpened","onClose","onClosed","onRequestClose"]),[n,r]=$(!1),s=ie(()=>e.open&&n()),{registerModal:i,unregisterModal:a,trapFocus:h}=ye();let o,u,l=null;const g={};async function f(){var d;(d=e.onOpen)==null||d.call(e),queueMicrotask(()=>{l=l||document.activeElement,i(g)})}function w(){var d;(d=e.onOpened)==null||d.call(e),c()}function E(){var d;(d=e.onClose)==null||d.call(e)}async function q(){var d,_;(d=e.onClosed)==null||d.call(e),(_=l.focus)==null||_.call(l,{preventScroll:!0}),l=null,a(g)}function y(d){var _;e.closeOnBackdrop&&!u.contains(d.target)&&((_=e.onRequestClose)==null||_.call(e))}function x(d){var _;e.closeOnEscape&&d.key==="Escape"&&((_=e.onRequestClose)==null||_.call(e))}function c(){o.contains(document.activeElement)||o.focus()}return re(()=>{r(!0),I(()=>{a(g)})}),v(me,{get show(){return s()},as:"span",get children(){return[v(p,{class:"dialog-backdrop",get classList(){return{[`dialog-backdrop_${e.variant}`]:Boolean(e.variant)}},enter:"dialog-backdrop_enter",enterFrom:"dialog-backdrop_out",enterTo:"dialog-backdrop_in",leave:"dialog-backdrop_leave",leaveFrom:"dialog-backdrop_in",leaveTo:"dialog-backdrop_out"}),(()=>{const d=Te.cloneNode(!0);d.$$keydown=m=>{x(m),h(m)},d.$$click=y;const _=o;return typeof _=="function"?_(d):o=d,G(d,t,!1,!0),S(d,v(p,{class:"dialog__wrapper",enter:"dialog__wrapper_enter",enterFrom:"dialog__wrapper_out",enterTo:"dialog__wrapper_in",leave:"dialog__wrapper_leave",leaveFrom:"dialog__wrapper_in",leaveTo:"dialog__wrapper_out",beforeEnter:f,afterEnter:w,beforeLeave:E,afterLeave:q,get children(){const m=qe.cloneNode(!0),T=u;return typeof T=="function"?T(m):u=m,S(m,()=>e.children),m}})),N(m=>oe(d,{[`dialog_${e.variant}`]:Boolean(e.variant),[e.class]:Boolean(e.class),...e.classList},m)),d})()]}})}K(["click","keydown"]);const Fe=L('<svg viewBox="0 0 22 22" fill="currentColor"><path d="m17.42 5.88-1.3-1.3L11 9.71 5.88 4.58l-1.3 1.3L9.71 11l-5.13 5.12 1.3 1.3L11 12.29l5.12 5.13 1.3-1.3L12.29 11l5.13-5.12Z"></path></svg>'),Re=(e={})=>(()=>{const t=Fe.cloneNode(!0);return G(t,e,!0,!0),t})();function Oe(e,t){const[n,r]=$(0),s=()=>typeof e=="function"?e():e,i=()=>typeof t=="function"?t():t;let a=0;return D(()=>{if(s()){let g=function(f){u||(u=f),l=f-u,r(Math.min((l+a)/h,1)),l+a<h&&(o=requestAnimationFrame(g))};const h=i();let o=null,u=null,l=0;o=requestAnimationFrame(g),I(()=>{cancelAnimationFrame(o),a+=l})}}),n}const Ae=L('<img alt="#">');function Pe(e){const[t,n]=$(!1),r=ie(()=>e.playing&&t()),s=Oe(r,5e3);return D(()=>{var i;return(i=e.onProgress)==null?void 0:i.call(e,s())}),(()=>{const i=Ae.cloneNode(!0);return i.addEventListener("load",()=>{var a;(a=e.onLoad)==null||a.call(e),n(!0)}),N(()=>O(i,"src",e.src)),i})()}function Me(){const[e,t]=$(null),[n,r]=$(0);return D(()=>{const s=e();if(s){let a=function(){cancelAnimationFrame(i),s.paused||(i=requestAnimationFrame(a)),h()},h=function(){s.duration&&r(s.currentTime/s.duration)},i=null;s.addEventListener("timeupdate",a),I(()=>{cancelAnimationFrame(i),s.removeEventListener("timeupdate",a)})}}),[t,n]}const Be=L("<video muted playsinline disablepictureinpicture></video>");function De(e){let t;const[n,r]=Me();D(()=>{var i;return(i=e.onProgress)==null?void 0:i.call(e,r())}),D(()=>e.playing?t.play():t.pause());function s(){var i;(i=e.onLoad)==null||i.call(e),setTimeout(()=>{console.log("some"),t.play()},1e3)}return(()=>{const i=Be.cloneNode(!0);return(a=>{t=a,n(a)})(i),i.addEventListener("canplaythrough",s),i.addEventListener("canplay",s),N(()=>O(i,"src",e.src)),i})()}const Ne=L('<div class="spinner" role="progressbar"><svg class="spinner__svg" fill="transparent"><circle class="spinner__circle" cx="50%" cy="50%" stroke="currentColor"></circle><circle class="spinner__circle " cx="50%" cy="50%" stroke="currentColor" pathLength="1" stroke-dasharray="0.4 0.6"></circle></svg></div>');function ze(e){e=A({size:40,thickness:4},e);const[,t]=Z(e,["size","thickness","class","classList","style"]);return(()=>{const n=Ne.cloneNode(!0),r=n.firstChild,s=r.firstChild,i=s.nextSibling;return G(n,t,!1,!0),N(a=>{const h={[e.class]:Boolean(e.class),...e.classList},o={...e.style,width:`${e.size}px`,height:`${e.size}px`},u=`${(e.size-e.thickness)/2}px`,l=`${e.thickness}px`,g=`${(e.size-e.thickness)/2}px`,f=`${e.thickness}px`;return a._v$=oe(n,h,a._v$),a._v$2=ue(n,o,a._v$2),u!==a._v$3&&O(s,"r",a._v$3=u),l!==a._v$4&&O(s,"stroke-width",a._v$4=l),g!==a._v$5&&O(i,"r",a._v$5=g),f!==a._v$6&&O(i,"stroke-width",a._v$6=f),a},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),n})()}const Ie=L('<svg viewBox="0 0 20 20" fill="currentColor"><path d="M2.5 16.67 18.07 10 2.5 3.33v5.19L13.61 10 2.5 11.48v5.19Z"></path></svg>'),ne=(e={})=>(()=>{const t=Ie.cloneNode(!0);return G(t,e,!0,!0),t})();const We=L('<div class="story"></div>'),je=L('<a target="_blank" class="story__button">\u041E\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u0437\u0430\u044F\u0432\u043A\u0443 </a>'),He=L('<button type="button" class="story__button">\u041E\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u0437\u0430\u044F\u0432\u043A\u0443 </button>');function Ve(e){const[,t]=Z(e,["onRequestForm"]),[n,r]=$(!1);return(()=>{const s=We.cloneNode(!0);return S(s,v(Q,A({get component(){return e.type==="image"?Pe:De}},t,{onLoad:()=>r(!0)})),null),S(s,v(U,{get when(){return n()},get fallback(){return v(ze,{class:"story__spinner",size:36,thickness:2})},get children(){return ae(()=>!!e.link,!0)()?(()=>{const i=je.cloneNode(!0);return i.firstChild,S(i,v(ne,{}),null),N(()=>O(i,"href",e.link)),i})():(()=>{const i=He.cloneNode(!0);return i.firstChild,fe(i,"click",e.onRequestForm,!0),S(i,v(ne,{}),null),i})()}}),null),s})()}K(["click"]);function Xe(e={}){const[t,n]=$(null);return D(()=>{if(!t())return;var r=t(),s,i,a,h=50,o=250;function u(f){f.pointerType==="touch"&&(r.setPointerCapture(f.pointerId),s=f.clientX,i=f.clientY,a=Date.now())}function l(f){f.pointerType}function g(f){var x,c,d,_,m;if(f.pointerType!=="touch")return;const w=f.clientX-s,E=f.clientY-i,q=Date.now()-a;let y="none";q<=o&&(Math.abs(w)>=h&&Math.abs(w)>Math.abs(E)?y=w<0?"left":"right":Math.abs(E)>=h&&Math.abs(E)>Math.abs(w)&&(y=E<0?"up":"down")),y==="left"?(x=e.onSwipedLeft)==null||x.call(e):y==="right"?(c=e.onSwipedRight)==null||c.call(e):y==="up"?(d=e.onSwipedUp)==null||d.call(e):y==="down"&&((_=e.onSwipedDown)==null||_.call(e)),y!=="none"&&((m=e.onSwiped)==null||m.call(e,{dir:y}))}r.addEventListener("pointerdown",u),r.addEventListener("pointermove",l),r.addEventListener("pointerup",g),I(()=>{r.removeEventListener("pointerdown",u),r.removeEventListener("pointermove",l),r.removeEventListener("pointerup",g)})}),n}const Ye=L('<div class="form"></div>');function Ue(e){function t(n){const r=document.querySelector(".request"),s=r.parentElement;n.appendChild(r),I(()=>{s.appendChild(r)})}return v(le,A({variant:"form"},e,{get children(){const n=Ye.cloneNode(!0),r=t;return typeof r=="function"?r(n):t=n,n}}))}const Ke=L('<div class="stories"><div class="stories__header"><div class="stories__bars"></div><div class="stories__row"><div class="stories__user"><img alt="" class="stories__ava"><div class="stories__info"><h3 class="stories__username"></h3><time class="stories__time"></time></div></div><button type="button" class="stories__close" aria-label="\u0417\u0430\u043A\u0440\u044B\u0442\u044C \u0441\u0442\u043E\u0440\u0438\u0441"></button></div></div><div class="stories__overlay"><div class="stories__left"></div><div class="stories__right"></div></div></div>'),Ze=L('<div class="stories__bar"></div>');function Ge(e){const[,t]=Z(e,["ava","username","time","stories","onOpen","onOpened","onClose","onClosed"]),[n,r]=$(0),[s,i]=$(!0),[a,h]=$(0),[o,u]=$(!1),[l,g]=$(!1),f=Xe({onSwiped({dir:c}){},onSwipedRight:E,onSwipedLeft:w,onSwipedDown(){var c;(c=e.onRequestClose)==null||c.call(e)}});function w(){r((n()+1)%e.stories.length)}function E(){r((n()-1+e.stories.length)%e.stories.length)}function q(c){h(c),c===1&&w()}const[y,x]=$(0);return re(()=>{function c(){x(document.documentElement.clientHeight)}c(),window.addEventListener("resize",c),I(()=>{window.removeEventListener("resize",c)})}),[v(le,A(t,{variant:"stories",closeOnBackdrop:!1,onOpen:()=>{var c;(c=e.onOpen)==null||c.call(e)},onOpened:()=>{var c;u(!0),(c=e.onOpened)==null||c.call(e)},onClose:()=>{var c;i(!1),(c=e.onClose)==null||c.call(e)},onClosed:()=>{var c;r(0),u(!1),h(0),i(!0),(c=e.onClosed)==null||c.call(e)},get children(){const c=Ke.cloneNode(!0),d=c.firstChild,_=d.firstChild,m=_.nextSibling,T=m.firstChild,W=T.firstChild,X=W.nextSibling,j=X.firstChild,Y=j.nextSibling,H=T.nextSibling,F=d.nextSibling,R=F.firstChild,P=R.nextSibling;return S(_,v(ve,{get each(){return e.stories},children:(b,k)=>(()=>{const C=Ze.cloneNode(!0);return N(()=>C.style.setProperty("--progress",k()<n()?1:k()===n()?a():0)),C})()})),S(j,()=>e.username),S(Y,()=>e.time),H.$$click=()=>{var b;return(b=e.onRequestClose)==null?void 0:b.call(e)},S(H,v(Re,{"aria-hidden":"true"})),f(F),R.$$click=E,P.$$click=w,S(c,v(U,{get when(){return ae(()=>!!o(),!0)()&&e.stories[n()]},keyed:!0,children:b=>v(Ve,A(b,{get playing(){return s()},onProgress:q,onRequestForm:()=>g(!0)}))}),null),N(b=>{const k=y(),C=e.ava;return k!==b._v$&&c.style.setProperty("--height",b._v$=k),C!==b._v$2&&O(W,"src",b._v$2=C),b},{_v$:void 0,_v$2:void 0}),c}})),v(Ue,{get open(){return l()},onRequestClose:()=>g(!1),onOpen:()=>i(!1),onClose:()=>i(!0)})]}K(["click"]);async function Je(){var u;const e=document.querySelector(".ava");if(!e)return;const t=((u=window.data)==null?void 0:u.stories)||[];t.length||e.classList.add("ava_empty");const n=e.querySelector("video.ava__media"),r=t.find(l=>l.type==="video");n&&r&&(n.src=r.src,n.addEventListener("canplaythrough",()=>{e.classList.add("ava_loaded")}));const[s,i]=$(!1),a=e.querySelector(".ava__stories");e.querySelector(".ava__picture").addEventListener("click",l=>{i(!0),l.preventDefault()}),e.querySelector(".ava__share").addEventListener("click",async()=>{var l;try{await navigator.share((l=window.data)==null?void 0:l.share)}catch(g){console.log(g)}}),ge(()=>v(Ge,{get ava(){var l;return(l=window.data)==null?void 0:l.ava},get username(){var l;return(l=window.data)==null?void 0:l.username},get time(){var l;return(l=window.data)==null?void 0:l.time},stories:t,get open(){return s()},onRequestClose:()=>i(!1),onOpen:()=>n==null?void 0:n.pause(),onClose:()=>n==null?void 0:n.play()}),a)}Je();function Qe(){const e=document.querySelector(".request");if(!e)return;e.querySelector(".request__form");const t=e.querySelector(".request__input");t.type==="tel"&&_e(t,{mask:"+{7} 000 000 00-00"})}Qe();
