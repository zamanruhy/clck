import{c as h,a as j,b as f,D as te,m as q,S as G,d as he,u as _e,e as ie,s as J,f as ce,o as de,g as Q,i as k,h as W,t as E,j as ue,k as X,l as D,n as re,p as me,q as $e,F as ye,r as we,I as be}from"./vendor.js";const fe=he();function Ee(e){const t=_e(fe);if(t)return t;throw new Error(`<${e}> must be used inside a <Transition>`)}function M(e,t){const n=t.filter(r=>r);n.length&&e.classList.add(...n)}function P(e,t){const n=t.filter(r=>r);n.length&&e.classList.remove(...n)}function ne(e){const t=Ee("TransitionChild"),[n,r]=h(t.show),[s,i]=h();let c=!0;function _(o,u){var l,v,m,F,B,z,N,T,O,d,g,$,R,K,U,Z,a,w;if(u){if(c){const b=(v=(l=e.enter)==null?void 0:l.split(" "))!=null?v:[],L=(F=(m=e.enterFrom)==null?void 0:m.split(" "))!=null?F:[],y=(z=(B=e.enterTo)==null?void 0:B.split(" "))!=null?z:[],x=(T=(N=e.entered)==null?void 0:N.split(" "))!=null?T:[],A=()=>{var S;P(o,b),P(o,y),M(o,x),(S=e.afterEnter)==null||S.call(e)};(O=e.beforeEnter)==null||O.call(e),M(o,b),M(o,L),requestAnimationFrame(()=>{P(o,L),M(o,y),o.addEventListener("transitionend",A,{once:!0}),o.addEventListener("animationend",A,{once:!0})})}}else{const b=(g=(d=e.leave)==null?void 0:d.split(" "))!=null?g:[],L=(R=($=e.leaveFrom)==null?void 0:$.split(" "))!=null?R:[],y=(U=(K=e.leaveTo)==null?void 0:K.split(" "))!=null?U:[],x=(a=(Z=e.entered)==null?void 0:Z.split(" "))!=null?a:[];(w=e.beforeLeave)==null||w.call(e),P(o,x),M(o,b),M(o,L),requestAnimationFrame(()=>{P(o,L),M(o,y)});const A=()=>{var S;P(o,b),P(o,y),r(!1),(S=e.afterLeave)==null||S.call(e)};o.addEventListener("transitionend",A,{once:!0}),o.addEventListener("animationend",A,{once:!0})}}return j(()=>{const o=t.show;o&&r(!0);const u=s();u instanceof HTMLElement?_(u,o):c=!0}),f(G,{get when(){var o;return(o=e.unmount)!=null?o:!0},get fallback(){return f(te,q({get component(){var o;return(o=e.as)!=null?o:"div"}},()=>oe(e,["as","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","unmount","afterEnter","afterLeave","appear","beforeEnter","beforeLeave","entered","ref"]),{ref(o){const u=se(e,l=>{i(()=>l)});typeof u=="function"&&u(o)},get children(){return e.children}}))},get children(){return f(G,{get when(){return n()},get children(){return f(te,q({get component(){var o;return(o=e.as)!=null?o:"div"}},()=>oe(e,["as","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","unmount","afterEnter","afterLeave","appear","beforeEnter","beforeLeave","entered","ref"]),{ref(o){const u=se(e,l=>{i(()=>l)});typeof u=="function"&&u(o)},get children(){return e.children}}))}})}})}function Ce(e){const t=oe(e,["show"]);return f(fe.Provider,{value:{get show(){return e.show}},get children(){return f(ne,t)}})}function ke(e){return typeof e=="function"}function se(e,t){return n=>{"ref"in e&&ke(e.ref)&&e.ref(n),t(n)}}function oe(e,t){const n={},r=Object.keys(e);for(let s=0,i=r.length;s<i;s+=1){const c=r[s];t.includes(c)||Object.defineProperty(n,c,{get(){return e[c]},configurable:!0,enumerable:!0})}return n}const I=new Set;let Y=null,ee=null;function Le(){return{registerModal:xe,unregisterModal:Se,trapFocus:Ae}}function xe(e){I.has(e)||(I.add(e),I.size===1&&(Fe(),document.body.style.overflow="hidden"))}function Se(e){!I.has(e)||(I.delete(e),I.size===0&&(Te(),document.body.style.overflow=""))}function qe(){return window.innerWidth>document.documentElement.clientWidth}function Fe(){!qe()||(Y=[document.body,...Array.from(document.querySelectorAll("[data-fixed]"))],Y.forEach(e=>{const t=e.getAttribute("data-fixed")||"padding",n=e.style[`${t}Right`],r=getComputedStyle(e)[`${t}Right`];e.setAttribute(`data-${t}-right`,n),e.style[`${t}Right`]=`${parseFloat(r)+Oe()}px`}))}function Te(){Y!==null&&(Y.forEach(e=>{const t=e.getAttribute("data-fixed")||"padding";e.style[`${t}Right`]=e.getAttribute(`data-${t}-right`),e.removeAttribute(`data-${t}-right`)}),Y=null)}function Oe(){if(ee===null){const e=document.createElement("div");e.style.cssText=`
      width: 100px;
      height: 100px;
      position: absolute;
      overflow: scroll;
      top: -9999px`,document.body.appendChild(e),ee=e.getBoundingClientRect().width-e.clientWidth,document.body.removeChild(e)}return ee}function Re(e){const t=["a[href]","area[href]",'input:not([type="hidden"]):not([type="radio"]):not([disabled])','input[type="radio"]:not([disabled]):checked',"select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","audio[controls]","video[controls]","[contenteditable]","[tabindex]"].map(n=>`${n}:not([tabindex^="-"])`).join(", ");return Array.from(e.querySelectorAll(t)).filter(n=>n.offsetWidth||n.offsetHeight||n.getClientRects().length)}function Ae(e){if(e.key!=="Tab")return;const t=Re(e.currentTarget);if(t.length===0){e.preventDefault();return}const n=t[0],r=t[t.length-1],s=document.activeElement;e.shiftKey?(s===n||s===e.currentTarget)&&(r.focus(),e.preventDefault()):s===r&&(n.focus(),e.preventDefault())}const Me=E('<div class="dialog__content"></div>'),Pe=E('<div class="dialog" role="dialog" aria-modal="true" tabindex="-1"></div>');function ve(e){e=q({open:!1,closeOnBackdrop:!0,closeOnEscape:!0},e);const[,t]=J(e,["class","classList","open","closeOnBackdrop","closeOnEscape","children","variant","onOpen","onOpened","onClose","onClosed","onRequestClose"]),[n,r]=h(!1),s=ce(()=>e.open&&n()),{registerModal:i,unregisterModal:c,trapFocus:_}=Le();let o,u,l=null;const v={};async function m(){var d;(d=e.onOpen)==null||d.call(e),queueMicrotask(()=>{l=l||document.activeElement,i(v)})}function F(){var d;(d=e.onOpened)==null||d.call(e),O()}function B(){var d;(d=e.onClose)==null||d.call(e)}async function z(){var d,g;(d=e.onClosed)==null||d.call(e),(g=l.focus)==null||g.call(l,{preventScroll:!0}),l=null,c(v)}function N(d){var g;e.closeOnBackdrop&&!u.contains(d.target)&&((g=e.onRequestClose)==null||g.call(e))}function T(d){var g;e.closeOnEscape&&d.key==="Escape"&&((g=e.onRequestClose)==null||g.call(e))}function O(){o.contains(document.activeElement)||o.focus()}return de(()=>{r(!0),X(()=>{c(v)})}),f(Ce,{get show(){return s()},as:"span",get children(){return[f(ne,{class:"dialog-backdrop",get classList(){return{[`dialog-backdrop_${e.variant}`]:Boolean(e.variant)}},enter:"dialog-backdrop_enter",enterFrom:"dialog-backdrop_out",enterTo:"dialog-backdrop_in",leave:"dialog-backdrop_leave",leaveFrom:"dialog-backdrop_in",leaveTo:"dialog-backdrop_out"}),(()=>{const d=Pe.cloneNode(!0);d.$$keydown=$=>{T($),_($)},d.$$click=N;const g=o;return typeof g=="function"?g(d):o=d,Q(d,t,!1,!0),k(d,f(ne,{class:"dialog__wrapper",enter:"dialog__wrapper_enter",enterFrom:"dialog__wrapper_out",enterTo:"dialog__wrapper_in",leave:"dialog__wrapper_leave",leaveFrom:"dialog__wrapper_in",leaveTo:"dialog__wrapper_out",beforeEnter:m,afterEnter:F,beforeLeave:B,afterLeave:z,get children(){const $=Me.cloneNode(!0),R=u;return typeof R=="function"?R($):u=$,k($,()=>e.children),$}})),W($=>ue(d,{[`dialog_${e.variant}`]:Boolean(e.variant),[e.class]:Boolean(e.class),...e.classList},$)),d})()]}})}ie(["click","keydown"]);const De=E('<svg viewBox="0 0 22 22" fill="currentColor"><path d="m17.42 5.88-1.3-1.3L11 9.71 5.88 4.58l-1.3 1.3L9.71 11l-5.13 5.12 1.3 1.3L11 12.29l5.12 5.13 1.3-1.3L12.29 11l5.13-5.12Z"></path></svg>'),Be=(e={})=>(()=>{const t=De.cloneNode(!0);return Q(t,e,!0,!0),t})();function ze(e,t){const[n,r]=h(0),s=()=>typeof e=="function"?e():e,i=()=>typeof t=="function"?t():t;let c=0;return j(()=>{if(s()){let v=function(m){u||(u=m),l=m-u,r(Math.min((l+c)/_,1)),l+c<_&&(o=requestAnimationFrame(v))};const _=i();let o=null,u=null,l=0;o=requestAnimationFrame(v),X(()=>{cancelAnimationFrame(o),c+=l})}}),n}const Ne=E('<img alt="#">');function Ie(e){const[t,n]=h(!1),r=ce(()=>e.playing&&t()),s=ze(r,5e3);return j(()=>{var i;return(i=e.onProgress)==null?void 0:i.call(e,s())}),(()=>{const i=Ne.cloneNode(!0);return i.addEventListener("load",()=>{var c;(c=e.onLoad)==null||c.call(e),n(!0)}),W(()=>D(i,"src",e.src)),i})()}function je(){const[e,t]=h(null),[n,r]=h(0);return j(()=>{const s=e();if(s){let c=function(){cancelAnimationFrame(i),s.paused||(i=requestAnimationFrame(c)),_()},_=function(){s.duration&&r(s.currentTime/s.duration)},i=null;s.addEventListener("timeupdate",c),X(()=>{cancelAnimationFrame(i),s.removeEventListener("timeupdate",c)})}}),[t,n]}function We(e){let t=window.videoEl;const[n,r]=je();j(()=>{var i;return(i=e.onProgress)==null?void 0:i.call(e,r())}),j(()=>e.playing?t.play():t.pause());function s(){var i;(i=e.onLoad)==null||i.call(e)}return n(t),X(()=>{window.videoEl.pause(),Object.assign(window.videoEl,{src:window.videoEl._src,currentTime:0,onloadeddata:null,oncanplay:null,oncanplaythrough:null}),window.avaPicture.appendChild(t)}),re(()=>Object.assign(window.videoEl,{src:e.src,onloadeddata:s,oncanplay:s,oncanplaythrough:s}))}const Xe=E('<div class="spinner" role="progressbar"><svg class="spinner__svg" fill="transparent"><circle class="spinner__circle" cx="50%" cy="50%" stroke="currentColor"></circle><circle class="spinner__circle " cx="50%" cy="50%" stroke="currentColor" pathLength="1" stroke-dasharray="0.4 0.6"></circle></svg></div>');function He(e){e=q({size:40,thickness:4},e);const[,t]=J(e,["size","thickness","class","classList","style"]);return(()=>{const n=Xe.cloneNode(!0),r=n.firstChild,s=r.firstChild,i=s.nextSibling;return Q(n,t,!1,!0),W(c=>{const _={[e.class]:Boolean(e.class),...e.classList},o={...e.style,width:`${e.size}px`,height:`${e.size}px`},u=`${(e.size-e.thickness)/2}px`,l=`${e.thickness}px`,v=`${(e.size-e.thickness)/2}px`,m=`${e.thickness}px`;return c._v$=ue(n,_,c._v$),c._v$2=me(n,o,c._v$2),u!==c._v$3&&D(s,"r",c._v$3=u),l!==c._v$4&&D(s,"stroke-width",c._v$4=l),v!==c._v$5&&D(i,"r",c._v$5=v),m!==c._v$6&&D(i,"stroke-width",c._v$6=m),c},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),n})()}const Ve=E('<svg viewBox="0 0 20 20" fill="currentColor"><path d="M2.5 16.67 18.07 10 2.5 3.33v5.19L13.61 10 2.5 11.48v5.19Z"></path></svg>'),le=(e={})=>(()=>{const t=Ve.cloneNode(!0);return Q(t,e,!0,!0),t})();const Ye=E('<div class="story"></div>'),Ke=E('<a target="_blank" class="story__button">\u041E\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u0437\u0430\u044F\u0432\u043A\u0443 </a>'),Ue=E('<button type="button" class="story__button">\u041E\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u0437\u0430\u044F\u0432\u043A\u0443 </button>');function Ze(e){const[,t]=J(e,["onRequestForm"]),[n,r]=h(!1);return(()=>{const s=Ye.cloneNode(!0);return k(s,f(te,q({get component(){return e.type==="image"?Ie:We}},t,{onLoad:()=>r(!0)})),null),k(s,f(G,{get when(){return n()},get fallback(){return f(He,{class:"story__spinner",size:36,thickness:2})},get children(){return re(()=>!!e.link,!0)()?(()=>{const i=Ke.cloneNode(!0);return i.firstChild,k(i,f(le,{}),null),W(()=>D(i,"href",e.link)),i})():(()=>{const i=Ue.cloneNode(!0);return i.firstChild,$e(i,"click",e.onRequestForm,!0),k(i,f(le,{}),null),i})()}}),null),s})()}ie(["click"]);const Ge=E('<div class="form"></div>');function Je(e){function t(n){const r=document.querySelector(".request"),s=r.parentElement;n.appendChild(r),X(()=>{s.appendChild(r)})}return f(ve,q({variant:"form"},e,{get children(){const n=Ge.cloneNode(!0),r=t;return typeof r=="function"?r(n):t=n,n}}))}const Qe=E('<div class="stories"><div class="stories__header"><div class="stories__bars"></div><div class="stories__row"><div class="stories__user"><img alt="" class="stories__ava"><div class="stories__info"><h3 class="stories__username"></h3><time class="stories__time"></time></div></div><button type="button" class="stories__close" aria-label="\u0417\u0430\u043A\u0440\u044B\u0442\u044C \u0441\u0442\u043E\u0440\u0438\u0441"></button></div></div><div class="stories__overlay"></div></div>'),pe=E('<div class="stories__bar"></div>');function et(e){const[,t]=J(e,["ava","username","time","stories","onOpen","onOpened","onClose","onClosed"]),[n,r]=h(0),[s,i]=h(!0),[c,_]=h(0),[o,u]=h(!1),[l,v]=h(!1);function m(){r((n()+1)%e.stories.length)}function F(){r((n()-1+e.stories.length)%e.stories.length)}function B(a){_(a),a===1&&m()}const[z,N]=h(0);de(()=>{function a(){N(document.documentElement.clientHeight)}a(),window.addEventListener("resize",a),X(()=>{window.removeEventListener("resize",a)})});var T,O,d,g=50,$=250;function R(a){a.target.setPointerCapture(a.pointerId),T=a.clientX,O=a.clientY,d=Date.now(),a.preventDefault()}function K(a){a.preventDefault()}function U(a){var x;const w=a.clientX-T,b=a.clientY-O,L=Date.now()-d;let y="none";L<=$&&(Math.abs(w)>=g&&Math.abs(w)>Math.abs(b)?y=w<0?"left":"right":Math.abs(b)>=g&&Math.abs(b)>Math.abs(w)&&(y=b<0?"up":"down")),y==="left"?m():y==="right"?F():y==="down"?(x=e.onRequestClose)==null||x.call(e):Z(a),a.preventDefault()}function Z(a){const w=a.currentTarget.getBoundingClientRect();a.clientX-w.left<w.width/2?F():m(),a.preventDefault()}return[f(ve,q(t,{variant:"stories",closeOnBackdrop:!1,onOpen:()=>{var a;(a=e.onOpen)==null||a.call(e)},onOpened:()=>{var a;u(!0),(a=e.onOpened)==null||a.call(e)},onClose:()=>{var a;i(!1),(a=e.onClose)==null||a.call(e)},onClosed:()=>{var a;r(0),u(!1),_(0),i(!0),(a=e.onClosed)==null||a.call(e)},get children(){const a=Qe.cloneNode(!0),w=a.firstChild,b=w.firstChild,L=b.nextSibling,y=L.firstChild,x=y.firstChild,A=x.nextSibling,S=A.firstChild,ge=S.nextSibling,ae=y.nextSibling,p=w.nextSibling;return k(b,f(ye,{get each(){return e.stories},children:(C,H)=>(()=>{const V=pe.cloneNode(!0);return W(()=>V.style.setProperty("--progress",H()<n()?1:H()===n()?c():0)),V})()})),k(S,()=>e.username),k(ge,()=>e.time),ae.$$click=()=>{var C;return(C=e.onRequestClose)==null?void 0:C.call(e)},k(ae,f(Be,{"aria-hidden":"true"})),p.$$pointerup=U,p.$$pointermove=K,p.$$pointerdown=R,k(a,f(G,{get when(){return re(()=>!!o(),!0)()&&e.stories[n()]},keyed:!0,children:C=>f(Ze,q(C,{get playing(){return s()},onProgress:B,onRequestForm:()=>v(!0)}))}),null),W(C=>{const H=z(),V=e.ava;return H!==C._v$&&a.style.setProperty("--height",C._v$=H),V!==C._v$2&&D(x,"src",C._v$2=V),C},{_v$:void 0,_v$2:void 0}),a}})),f(Je,{get open(){return l()},onRequestClose:()=>v(!1),onOpen:()=>i(!1),onClose:()=>i(!0)})]}ie(["click","pointerdown","pointermove","pointerup"]);async function tt(){var u;const e=document.querySelector(".ava");if(!e)return;const t=((u=window.data)==null?void 0:u.stories)||[];t.length||e.classList.add("ava_empty");const n=e.querySelector("video.ava__media"),r=t.find(l=>l.type==="video");n&&r&&(n.src=r.src,n.addEventListener("canplaythrough",()=>{e.classList.add("ava_loaded")}),window.videoEl.src=window.videoEl._src=r.src);const[s,i]=h(!1),c=e.querySelector(".ava__stories");e.querySelector(".ava__picture").addEventListener("click",l=>{l.preventDefault(),i(!0)}),window.addEventListener("click",()=>{window.videoEl.play().then(()=>window.videoEl.pause())},{once:!0}),e.querySelector(".ava__share").addEventListener("click",async()=>{var l;try{await navigator.share((l=window.data)==null?void 0:l.share)}catch(v){console.log(v)}}),we(()=>f(et,{get ava(){var l;return(l=window.data)==null?void 0:l.ava},get username(){var l;return(l=window.data)==null?void 0:l.username},get time(){var l;return(l=window.data)==null?void 0:l.time},stories:t,get open(){return s()},onRequestClose:()=>i(!1),onOpen:()=>n==null?void 0:n.pause(),onClose:()=>n==null?void 0:n.play()}),c)}tt();function nt(){const e=document.querySelector(".request");if(!e)return;e.querySelector(".request__form");const t=e.querySelector(".request__input");t.type==="tel"&&be(t,{mask:"+{7} 000 000 00-00"})}nt();
