import{d as Q,c as y,a as z,b as v,D as ne,m as P,S as J,e as he,u as _e,s as p,f as ce,o as ue,g as ee,i as C,h as I,t as w,j,k as de,l as O,n as me,p as fe,q as $e,F as ye,r as be,I as we}from"./vendor.js";Q(["click"]);const ve=he();function Ee(e){const t=_e(ve);if(t)return t;throw new Error(`<${e}> must be used inside a <Transition>`)}function B(e,t){const n=t.filter(a=>a);n.length&&e.classList.add(...n)}function N(e,t){const n=t.filter(a=>a);n.length&&e.classList.remove(...n)}function re(e){const t=Ee("TransitionChild"),[n,a]=y(t.show),[s,r]=y();let l=!0;function g(i,d){var c,h,f,E,b,T,$,k,S,u,_,m,A,K,Z,o,x,X;if(d){if(l){const D=(h=(c=e.enter)==null?void 0:c.split(" "))!=null?h:[],q=(E=(f=e.enterFrom)==null?void 0:f.split(" "))!=null?E:[],F=(T=(b=e.enterTo)==null?void 0:b.split(" "))!=null?T:[],H=(k=($=e.entered)==null?void 0:$.split(" "))!=null?k:[],R=()=>{var M;N(i,D),N(i,F),B(i,H),(M=e.afterEnter)==null||M.call(e)};(S=e.beforeEnter)==null||S.call(e),B(i,D),B(i,q),requestAnimationFrame(()=>{N(i,q),B(i,F),i.addEventListener("transitionend",R,{once:!0}),i.addEventListener("animationend",R,{once:!0})})}}else{const D=(_=(u=e.leave)==null?void 0:u.split(" "))!=null?_:[],q=(A=(m=e.leaveFrom)==null?void 0:m.split(" "))!=null?A:[],F=(Z=(K=e.leaveTo)==null?void 0:K.split(" "))!=null?Z:[],H=(x=(o=e.entered)==null?void 0:o.split(" "))!=null?x:[];(X=e.beforeLeave)==null||X.call(e),N(i,H),B(i,D),B(i,q),requestAnimationFrame(()=>{N(i,q),B(i,F)});const R=()=>{var M;N(i,D),N(i,F),a(!1),(M=e.afterLeave)==null||M.call(e)};i.addEventListener("transitionend",R,{once:!0}),i.addEventListener("animationend",R,{once:!0})}}return z(()=>{const i=t.show;i&&a(!0);const d=s();d instanceof HTMLElement?g(d,i):l=!0}),v(J,{get when(){var i;return(i=e.unmount)!=null?i:!0},get fallback(){return v(ne,P({get component(){var i;return(i=e.as)!=null?i:"div"}},()=>ie(e,["as","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","unmount","afterEnter","afterLeave","appear","beforeEnter","beforeLeave","entered","ref"]),{ref(i){const d=se(e,c=>{r(()=>c)});typeof d=="function"&&d(i)},get children(){return e.children}}))},get children(){return v(J,{get when(){return n()},get children(){return v(ne,P({get component(){var i;return(i=e.as)!=null?i:"div"}},()=>ie(e,["as","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","unmount","afterEnter","afterLeave","appear","beforeEnter","beforeLeave","entered","ref"]),{ref(i){const d=se(e,c=>{r(()=>c)});typeof d=="function"&&d(i)},get children(){return e.children}}))}})}})}function Le(e){const t=ie(e,["show"]);return v(ve.Provider,{value:{get show(){return e.show}},get children(){return v(re,t)}})}function Ce(e){return typeof e=="function"}function se(e,t){return n=>{"ref"in e&&Ce(e.ref)&&e.ref(n),t(n)}}function ie(e,t){const n={},a=Object.keys(e);for(let s=0,r=a.length;s<r;s+=1){const l=a[s];t.includes(l)||Object.defineProperty(n,l,{get(){return e[l]},configurable:!0,enumerable:!0})}return n}const W=new Set;let Y=null,te=null;function ke(){return{registerModal:Se,unregisterModal:Te,trapFocus:Pe}}function Se(e){W.has(e)||(W.add(e),W.size===1&&(qe(),document.body.style.overflow="hidden"))}function Te(e){!W.has(e)||(W.delete(e),W.size===0&&(Fe(),document.body.style.overflow=""))}function xe(){return window.innerWidth>document.documentElement.clientWidth}function qe(){!xe()||(Y=[document.body,...Array.from(document.querySelectorAll("[data-fixed]"))],Y.forEach(e=>{const t=e.getAttribute("data-fixed")||"padding",n=e.style[`${t}Right`],a=getComputedStyle(e)[`${t}Right`];e.setAttribute(`data-${t}-right`,n),e.style[`${t}Right`]=`${parseFloat(a)+Re()}px`}))}function Fe(){Y!==null&&(Y.forEach(e=>{const t=e.getAttribute("data-fixed")||"padding";e.style[`${t}Right`]=e.getAttribute(`data-${t}-right`),e.removeAttribute(`data-${t}-right`)}),Y=null)}function Re(){if(te===null){const e=document.createElement("div");e.style.cssText=`
      width: 100px;
      height: 100px;
      position: absolute;
      overflow: scroll;
      top: -9999px`,document.body.appendChild(e),te=e.getBoundingClientRect().width-e.clientWidth,document.body.removeChild(e)}return te}function Oe(e){const t=["a[href]","area[href]",'input:not([type="hidden"]):not([type="radio"]):not([disabled])','input[type="radio"]:not([disabled]):checked',"select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","audio[controls]","video[controls]","[contenteditable]","[tabindex]"].map(n=>`${n}:not([tabindex^="-"])`).join(", ");return Array.from(e.querySelectorAll(t)).filter(n=>n.offsetWidth||n.offsetHeight||n.getClientRects().length)}function Pe(e){if(e.key!=="Tab")return;const t=Oe(e.currentTarget);if(t.length===0){e.preventDefault();return}const n=t[0],a=t[t.length-1],s=document.activeElement;e.shiftKey?(s===n||s===e.currentTarget)&&(a.focus(),e.preventDefault()):s===a&&(n.focus(),e.preventDefault())}const Ae=w('<div class="dialog__content"></div>'),De=w('<div class="dialog" role="dialog" aria-modal="true" tabindex="-1"></div>');function ge(e){e=P({open:!1,closeOnBackdrop:!0,closeOnEscape:!0},e);const[,t]=p(e,["class","classList","open","closeOnBackdrop","closeOnEscape","children","variant","onOpen","onOpened","onClose","onClosed","onRequestClose"]),[n,a]=y(!1),s=ce(()=>e.open&&n()),{registerModal:r,unregisterModal:l,trapFocus:g}=ke();let i,d,c=null;const h={};async function f(){var u;(u=e.onOpen)==null||u.call(e),queueMicrotask(()=>{c=c||document.activeElement,r(h)})}function E(){var u;(u=e.onOpened)==null||u.call(e),S()}function b(){var u;(u=e.onClose)==null||u.call(e)}async function T(){var u,_;(u=e.onClosed)==null||u.call(e),(_=c.focus)==null||_.call(c,{preventScroll:!0}),c=null,l(h)}function $(u){var _;e.closeOnBackdrop&&!d.contains(u.target)&&((_=e.onRequestClose)==null||_.call(e))}function k(u){var _;e.closeOnEscape&&u.key==="Escape"&&((_=e.onRequestClose)==null||_.call(e))}function S(){i.contains(document.activeElement)||i.focus()}return ue(()=>{a(!0),j(()=>{l(h)})}),v(Le,{get show(){return s()},as:"span",get children(){return[v(re,{class:"dialog-backdrop",get classList(){return{[`dialog-backdrop_${e.variant}`]:Boolean(e.variant)}},enter:"dialog-backdrop_enter",enterFrom:"dialog-backdrop_out",enterTo:"dialog-backdrop_in",leave:"dialog-backdrop_leave",leaveFrom:"dialog-backdrop_in",leaveTo:"dialog-backdrop_out"}),(()=>{const u=De.cloneNode(!0);u.$$keydown=m=>{k(m),g(m)},u.$$click=$;const _=i;return typeof _=="function"?_(u):i=u,ee(u,t,!1,!0),C(u,v(re,{class:"dialog__wrapper",enter:"dialog__wrapper_enter",enterFrom:"dialog__wrapper_out",enterTo:"dialog__wrapper_in",leave:"dialog__wrapper_leave",leaveFrom:"dialog__wrapper_in",leaveTo:"dialog__wrapper_out",beforeEnter:f,afterEnter:E,beforeLeave:b,afterLeave:T,get children(){const m=Ae.cloneNode(!0),A=d;return typeof A=="function"?A(m):d=m,C(m,()=>e.children),m}})),I(m=>de(u,{[`dialog_${e.variant}`]:Boolean(e.variant),[e.class]:Boolean(e.class),...e.classList},m)),u})()]}})}Q(["click","keydown"]);const Me=w('<svg viewBox="0 0 22 22" fill="currentColor"><path d="m17.42 5.88-1.3-1.3L11 9.71 5.88 4.58l-1.3 1.3L9.71 11l-5.13 5.12 1.3 1.3L11 12.29l5.12 5.13 1.3-1.3L12.29 11l5.13-5.12Z"></path></svg>'),Be=(e={})=>(()=>{const t=Me.cloneNode(!0);return ee(t,e,!0,!0),t})();function Ne(e,t){const[n,a]=y(0),s=()=>typeof e=="function"?e():e,r=()=>typeof t=="function"?t():t;let l=0;return z(()=>{if(s()){let h=function(f){d||(d=f),c=f-d,a(Math.min((c+l)/g,1)),c+l<g&&(i=requestAnimationFrame(h))};const g=r();let i=null,d=null,c=0;i=requestAnimationFrame(h),j(()=>{cancelAnimationFrame(i),l+=c})}}),n}const ze=w('<img alt="#">');function Ie(e){const[t,n]=y(!1),a=ce(()=>e.playing&&t()),s=Ne(a,5e3);return z(()=>{var r;return(r=e.onProgress)==null?void 0:r.call(e,s())}),(()=>{const r=ze.cloneNode(!0);return r.addEventListener("load",()=>{var l;(l=e.onLoad)==null||l.call(e),n(!0)}),I(()=>O(r,"src",e.src)),r})()}function We(){const[e,t]=y(null),[n,a]=y(0);return z(()=>{const s=e();if(s){let l=function(){cancelAnimationFrame(r),s.paused||(r=requestAnimationFrame(l)),g()},g=function(){s.duration&&a(s.currentTime/s.duration)},r=null;s.addEventListener("timeupdate",l),j(()=>{cancelAnimationFrame(r),s.removeEventListener("timeupdate",l)})}}),[t,n]}const je=w("<video muted autoplay playsinline disablepictureinpicture></video>");function Xe(e){let t;const[n,a]=We();z(()=>{var r;return(r=e.onProgress)==null?void 0:r.call(e,a())}),z(()=>e.playing?t.play():t.pause());function s(){var r;(r=e.onLoad)==null||r.call(e),setTimeout(()=>{console.log("some"),t.play(),t.muted=!1},1e3)}return(()=>{const r=je.cloneNode(!0);return(l=>{t=l,n(l)})(r),r.addEventListener("loadeddata",s),I(()=>O(r,"src",e.src)),r})()}const He=w('<div class="spinner" role="progressbar"><svg class="spinner__svg" fill="transparent"><circle class="spinner__circle" cx="50%" cy="50%" stroke="currentColor"></circle><circle class="spinner__circle " cx="50%" cy="50%" stroke="currentColor" pathLength="1" stroke-dasharray="0.4 0.6"></circle></svg></div>');function Ue(e){e=P({size:40,thickness:4},e);const[,t]=p(e,["size","thickness","class","classList","style"]);return(()=>{const n=He.cloneNode(!0),a=n.firstChild,s=a.firstChild,r=s.nextSibling;return ee(n,t,!1,!0),I(l=>{const g={[e.class]:Boolean(e.class),...e.classList},i={...e.style,width:`${e.size}px`,height:`${e.size}px`},d=`${(e.size-e.thickness)/2}px`,c=`${e.thickness}px`,h=`${(e.size-e.thickness)/2}px`,f=`${e.thickness}px`;return l._v$=de(n,g,l._v$),l._v$2=me(n,i,l._v$2),d!==l._v$3&&O(s,"r",l._v$3=d),c!==l._v$4&&O(s,"stroke-width",l._v$4=c),h!==l._v$5&&O(r,"r",l._v$5=h),f!==l._v$6&&O(r,"stroke-width",l._v$6=f),l},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),n})()}const Ve=w('<svg viewBox="0 0 20 20" fill="currentColor"><path d="M2.5 16.67 18.07 10 2.5 3.33v5.19L13.61 10 2.5 11.48v5.19Z"></path></svg>'),le=(e={})=>(()=>{const t=Ve.cloneNode(!0);return ee(t,e,!0,!0),t})();const Ye=w('<div class="story"></div>'),Ke=w('<a target="_blank" class="story__button">\u041E\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u0437\u0430\u044F\u0432\u043A\u0443 </a>'),Ze=w('<button type="button" class="story__button">\u041E\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u0437\u0430\u044F\u0432\u043A\u0443 </button>');function Ge(e){const[,t]=p(e,["onRequestForm"]),[n,a]=y(!1);return(()=>{const s=Ye.cloneNode(!0);return C(s,v(ne,P({get component(){return e.type==="image"?Ie:Xe}},t,{onLoad:()=>a(!0)})),null),C(s,v(J,{get when(){return n()},get fallback(){return v(Ue,{class:"story__spinner",size:36,thickness:2})},get children(){return fe(()=>!!e.link,!0)()?(()=>{const r=Ke.cloneNode(!0);return r.firstChild,C(r,v(le,{}),null),I(()=>O(r,"href",e.link)),r})():(()=>{const r=Ze.cloneNode(!0);return r.firstChild,$e(r,"click",e.onRequestForm,!0),C(r,v(le,{}),null),r})()}}),null),s})()}Q(["click"]);function Je(e={}){const[t,n]=y(null);return z(()=>{if(!t())return;var a=t(),s,r,l,g=50,i=250;function d(f){f.pointerType==="touch"&&(a.setPointerCapture(f.pointerId),s=f.clientX,r=f.clientY,l=Date.now(),f.preventDefault())}function c(f){f.pointerType==="touch"&&f.preventDefault()}function h(f){var k,S,u,_,m;if(f.pointerType!=="touch")return;const E=f.clientX-s,b=f.clientY-r,T=Date.now()-l;let $="none";T<=i&&(Math.abs(E)>=g&&Math.abs(E)>Math.abs(b)?$=E<0?"left":"right":Math.abs(b)>=g&&Math.abs(b)>Math.abs(E)&&($=b<0?"up":"down")),$==="left"?(k=e.onSwipedLeft)==null||k.call(e):$==="right"?(S=e.onSwipedRight)==null||S.call(e):$==="up"?(u=e.onSwipedUp)==null||u.call(e):$==="down"&&((_=e.onSwipedDown)==null||_.call(e)),$!=="none"&&((m=e.onSwiped)==null||m.call(e,{dir:$})),f.preventDefault()}a.addEventListener("pointerdown",d),a.addEventListener("pointermove",c),a.addEventListener("pointerup",h),j(()=>{a.removeEventListener("pointerdown",d),a.removeEventListener("pointermove",c),a.removeEventListener("pointerup",h)})}),n}const Qe=w('<div class="form"></div>');function pe(e){function t(n){const a=document.querySelector(".request"),s=a.parentElement;n.appendChild(a),j(()=>{s.appendChild(a)})}return v(ge,P({variant:"form"},e,{get children(){const n=Qe.cloneNode(!0),a=t;return typeof a=="function"?a(n):t=n,n}}))}const et=w('<div class="stories"><div class="stories__header"><div class="stories__bars"></div><div class="stories__row"><div class="stories__user"><img alt="" class="stories__ava"><div class="stories__info"><h3 class="stories__username"></h3><time class="stories__time"></time></div></div><button type="button" class="stories__close" aria-label="\u0417\u0430\u043A\u0440\u044B\u0442\u044C \u0441\u0442\u043E\u0440\u0438\u0441"></button></div></div><div class="stories__overlay"></div></div>'),tt=w('<div class="stories__bar"></div>');function nt(e){let[t,n]=y(null);const[,a]=p(e,["ava","username","time","stories","onOpen","onOpened","onClose","onClosed"]),[s,r]=y(0),[l,g]=y(!0),[i,d]=y(0),[c,h]=y(!1),[f,E]=y(!1);let b=null;const T=Je({onSwiped({dir:o}){},onSwipedRight:k,onSwipedLeft:$,onSwipedDown(){var o;(o=e.onRequestClose)==null||o.call(e)}});function $(){r((s()+1)%e.stories.length)}function k(){r((s()-1+e.stories.length)%e.stories.length)}function S(o){d(o),o===1&&$()}function u(o){o.pointerType==="touch"||o.button!==0||(o.target.setPointerCapture(o.pointerId),l()&&(b=setTimeout(()=>{g(!1),b=null},150)),o.preventDefault())}function _(o){o.pointerType==="touch"||o.button!==0||(b&&(clearTimeout(b),b=null,m(o)),g(!0),o.preventDefault())}function m(o){const x=o.currentTarget.getBoundingClientRect();o.clientX-x.left<x.width/2?k():$()}function A(o){o.pointerType==="touch"&&m(o)}const[K,Z]=y(0);return ue(()=>{function o(){Z(document.documentElement.clientHeight)}o(),window.addEventListener("resize",o),j(()=>{window.removeEventListener("resize",o)})}),[v(ge,P(a,{variant:"stories",closeOnBackdrop:!1,onOpen:()=>{var o;(o=e.onOpen)==null||o.call(e)},onOpened:()=>{var o;h(!0),(o=e.onOpened)==null||o.call(e)},onClose:()=>{var o;g(!1),(o=e.onClose)==null||o.call(e)},onClosed:()=>{var o;r(0),h(!1),d(0),g(!0),(o=e.onClosed)==null||o.call(e)},get children(){const o=et.cloneNode(!0),x=o.firstChild,X=x.firstChild,D=X.nextSibling,q=D.firstChild,F=q.firstChild,H=F.nextSibling,R=H.firstChild,M=R.nextSibling,oe=q.nextSibling,G=x.nextSibling,ae=t;return typeof ae=="function"?ae(o):t=o,C(X,v(ye,{get each(){return e.stories},children:(L,U)=>(()=>{const V=tt.cloneNode(!0);return I(()=>V.style.setProperty("--progress",U()<s()?1:U()===s()?i():0)),V})()})),C(R,()=>e.username),C(M,()=>e.time),oe.$$click=()=>{var L;return(L=e.onRequestClose)==null?void 0:L.call(e)},C(oe,v(Be,{"aria-hidden":"true"})),T(G),G.$$click=A,G.$$pointerup=_,G.$$pointerdown=u,C(o,v(J,{get when(){return fe(()=>!!c(),!0)()&&e.stories[s()]},keyed:!0,children:L=>v(Ge,P(L,{get playing(){return l()},onProgress:S,onRequestForm:()=>E(!0)}))}),null),I(L=>{const U=K(),V=e.ava;return U!==L._v$&&o.style.setProperty("--height",L._v$=U),V!==L._v$2&&O(F,"src",L._v$2=V),L},{_v$:void 0,_v$2:void 0}),o}})),v(pe,{get open(){return f()},onRequestClose:()=>E(!1),onOpen:()=>g(!1),onClose:()=>g(!0)})]}Q(["click","pointerdown","pointerup"]);async function rt(){var d;const e=document.querySelector(".ava");if(!e)return;const t=((d=window.data)==null?void 0:d.stories)||[];t.length||e.classList.add("ava_empty");const n=e.querySelector("video.ava__media"),a=t.find(c=>c.type==="video");n&&a&&(n.src=a.src,n.addEventListener("canplaythrough",()=>{e.classList.add("ava_loaded")}));const[s,r]=y(!1),l=e.querySelector(".ava__stories");e.querySelector(".ava__picture").addEventListener("click",c=>{r(!0),c.preventDefault()}),e.querySelector(".ava__share").addEventListener("click",async()=>{var c;try{await navigator.share((c=window.data)==null?void 0:c.share)}catch(h){console.log(h)}}),be(()=>v(nt,{get ava(){var c;return(c=window.data)==null?void 0:c.ava},get username(){var c;return(c=window.data)==null?void 0:c.username},get time(){var c;return(c=window.data)==null?void 0:c.time},stories:t,get open(){return s()},onRequestClose:()=>r(!1),onOpen:()=>n==null?void 0:n.pause(),onClose:()=>n==null?void 0:n.play()}),l)}rt();function it(){const e=document.querySelector(".request");if(!e)return;e.querySelector(".request__form");const t=e.querySelector(".request__input");t.type==="tel"&&we(t,{mask:"+{7} 000 000 00-00"})}it();
