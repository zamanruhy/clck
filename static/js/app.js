import{d as K,c as m,a as B,b as g,D as Q,m as P,S as H,e as ce,u as ue,s as Z,f as ie,o as de,g as G,i as k,h as N,t as b,j as U,k as oe,l as O,n as fe,p as ae,q as ve,F as ge,r as he,I as _e}from"./vendor.js";K(["click"]);const se=ce();function me(e){const t=ue(se);if(t)return t;throw new Error(`<${e}> must be used inside a <Transition>`)}function D(e,t){const n=t.filter(o=>o);n.length&&e.classList.add(...n)}function M(e,t){const n=t.filter(o=>o);n.length&&e.classList.remove(...n)}function p(e){const t=me("TransitionChild"),[n,o]=m(t.show),[s,a]=m();let l=!0;function v(i,d){var c,h,f,w,y,E,$,S,T,u,_,r,C,z,V,W,j,Y;if(d){if(l){const x=(h=(c=e.enter)==null?void 0:c.split(" "))!=null?h:[],A=(w=(f=e.enterFrom)==null?void 0:f.split(" "))!=null?w:[],q=(E=(y=e.enterTo)==null?void 0:y.split(" "))!=null?E:[],F=(S=($=e.entered)==null?void 0:$.split(" "))!=null?S:[],L=()=>{var R;M(i,x),M(i,q),D(i,F),(R=e.afterEnter)==null||R.call(e)};(T=e.beforeEnter)==null||T.call(e),D(i,x),D(i,A),requestAnimationFrame(()=>{M(i,A),D(i,q),i.addEventListener("transitionend",L,{once:!0}),i.addEventListener("animationend",L,{once:!0})})}}else{const x=(_=(u=e.leave)==null?void 0:u.split(" "))!=null?_:[],A=(C=(r=e.leaveFrom)==null?void 0:r.split(" "))!=null?C:[],q=(V=(z=e.leaveTo)==null?void 0:z.split(" "))!=null?V:[],F=(j=(W=e.entered)==null?void 0:W.split(" "))!=null?j:[];(Y=e.beforeLeave)==null||Y.call(e),M(i,F),D(i,x),D(i,A),requestAnimationFrame(()=>{M(i,A),D(i,q)});const L=()=>{var R;M(i,x),M(i,q),o(!1),(R=e.afterLeave)==null||R.call(e)};i.addEventListener("transitionend",L,{once:!0}),i.addEventListener("animationend",L,{once:!0})}}return B(()=>{const i=t.show;i&&o(!0);const d=s();d instanceof HTMLElement?v(d,i):l=!0}),g(H,{get when(){var i;return(i=e.unmount)!=null?i:!0},get fallback(){return g(Q,P({get component(){var i;return(i=e.as)!=null?i:"div"}},()=>ee(e,["as","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","unmount","afterEnter","afterLeave","appear","beforeEnter","beforeLeave","entered","ref"]),{ref(i){const d=ne(e,c=>{a(()=>c)});typeof d=="function"&&d(i)},get children(){return e.children}}))},get children(){return g(H,{get when(){return n()},get children(){return g(Q,P({get component(){var i;return(i=e.as)!=null?i:"div"}},()=>ee(e,["as","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","unmount","afterEnter","afterLeave","appear","beforeEnter","beforeLeave","entered","ref"]),{ref(i){const d=ne(e,c=>{a(()=>c)});typeof d=="function"&&d(i)},get children(){return e.children}}))}})}})}function $e(e){const t=ee(e,["show"]);return g(se.Provider,{value:{get show(){return e.show}},get children(){return g(p,t)}})}function ye(e){return typeof e=="function"}function ne(e,t){return n=>{"ref"in e&&ye(e.ref)&&e.ref(n),t(n)}}function ee(e,t){const n={},o=Object.keys(e);for(let s=0,a=o.length;s<a;s+=1){const l=o[s];t.includes(l)||Object.defineProperty(n,l,{get(){return e[l]},configurable:!0,enumerable:!0})}return n}const I=new Set;let X=null,J=null;function be(){return{registerModal:we,unregisterModal:Ce,trapFocus:xe}}function we(e){I.has(e)||(I.add(e),I.size===1&&(ke(),document.body.style.overflow="hidden"))}function Ce(e){!I.has(e)||(I.delete(e),I.size===0&&(Ee(),document.body.style.overflow=""))}function Le(){return window.innerWidth>document.documentElement.clientWidth}function ke(){!Le()||(X=[document.body,...Array.from(document.querySelectorAll("[data-fixed]"))],X.forEach(e=>{const t=e.getAttribute("data-fixed")||"padding",n=e.style[`${t}Right`],o=getComputedStyle(e)[`${t}Right`];e.setAttribute(`data-${t}-right`,n),e.style[`${t}Right`]=`${parseFloat(o)+Se()}px`}))}function Ee(){X!==null&&(X.forEach(e=>{const t=e.getAttribute("data-fixed")||"padding";e.style[`${t}Right`]=e.getAttribute(`data-${t}-right`),e.removeAttribute(`data-${t}-right`)}),X=null)}function Se(){if(J===null){const e=document.createElement("div");e.style.cssText=`
      width: 100px;
      height: 100px;
      position: absolute;
      overflow: scroll;
      top: -9999px`,document.body.appendChild(e),J=e.getBoundingClientRect().width-e.clientWidth,document.body.removeChild(e)}return J}function Te(e){const t=["a[href]","area[href]",'input:not([type="hidden"]):not([type="radio"]):not([disabled])','input[type="radio"]:not([disabled]):checked',"select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","audio[controls]","video[controls]","[contenteditable]","[tabindex]"].map(n=>`${n}:not([tabindex^="-"])`).join(", ");return Array.from(e.querySelectorAll(t)).filter(n=>n.offsetWidth||n.offsetHeight||n.getClientRects().length)}function xe(e){if(e.key!=="Tab")return;const t=Te(e.currentTarget);if(t.length===0){e.preventDefault();return}const n=t[0],o=t[t.length-1],s=document.activeElement;e.shiftKey?(s===n||s===e.currentTarget)&&(o.focus(),e.preventDefault()):s===o&&(n.focus(),e.preventDefault())}const qe=b('<div class="dialog__content"></div>'),Fe=b('<div class="dialog" role="dialog" aria-modal="true" tabindex="-1"></div>');function le(e){e=P({open:!1,closeOnBackdrop:!0,closeOnEscape:!0},e);const[,t]=Z(e,["class","classList","open","closeOnBackdrop","closeOnEscape","children","variant","onOpen","onOpened","onClose","onClosed","onRequestClose"]),[n,o]=m(!1),s=ie(()=>e.open&&n()),{registerModal:a,unregisterModal:l,trapFocus:v}=be();let i,d,c=null;const h={};async function f(){var u;(u=e.onOpen)==null||u.call(e),queueMicrotask(()=>{c=c||document.activeElement,a(h)})}function w(){var u;(u=e.onOpened)==null||u.call(e),T()}function y(){var u;(u=e.onClose)==null||u.call(e)}async function E(){var u,_;(u=e.onClosed)==null||u.call(e),(_=c.focus)==null||_.call(c,{preventScroll:!0}),c=null,l(h)}function $(u){var _;e.closeOnBackdrop&&!d.contains(u.target)&&((_=e.onRequestClose)==null||_.call(e))}function S(u){var _;e.closeOnEscape&&u.key==="Escape"&&((_=e.onRequestClose)==null||_.call(e))}function T(){i.contains(document.activeElement)||i.focus()}return de(()=>{o(!0),U(()=>{l(h)})}),g($e,{get show(){return s()},as:"span",get children(){return[g(p,{class:"dialog-backdrop",get classList(){return{[`dialog-backdrop_${e.variant}`]:Boolean(e.variant)}},enter:"dialog-backdrop_enter",enterFrom:"dialog-backdrop_out",enterTo:"dialog-backdrop_in",leave:"dialog-backdrop_leave",leaveFrom:"dialog-backdrop_in",leaveTo:"dialog-backdrop_out"}),(()=>{const u=Fe.cloneNode(!0);u.$$keydown=r=>{S(r),v(r)},u.$$click=$;const _=i;return typeof _=="function"?_(u):i=u,G(u,t,!1,!0),k(u,g(p,{class:"dialog__wrapper",enter:"dialog__wrapper_enter",enterFrom:"dialog__wrapper_out",enterTo:"dialog__wrapper_in",leave:"dialog__wrapper_leave",leaveFrom:"dialog__wrapper_in",leaveTo:"dialog__wrapper_out",beforeEnter:f,afterEnter:w,beforeLeave:y,afterLeave:E,get children(){const r=qe.cloneNode(!0),C=d;return typeof C=="function"?C(r):d=r,k(r,()=>e.children),r}})),N(r=>oe(u,{[`dialog_${e.variant}`]:Boolean(e.variant),[e.class]:Boolean(e.class),...e.classList},r)),u})()]}})}K(["click","keydown"]);const Re=b('<svg viewBox="0 0 22 22" fill="currentColor"><path d="m17.42 5.88-1.3-1.3L11 9.71 5.88 4.58l-1.3 1.3L9.71 11l-5.13 5.12 1.3 1.3L11 12.29l5.12 5.13 1.3-1.3L12.29 11l5.13-5.12Z"></path></svg>'),Oe=(e={})=>(()=>{const t=Re.cloneNode(!0);return G(t,e,!0,!0),t})();function Pe(e,t){const[n,o]=m(0),s=()=>typeof e=="function"?e():e,a=()=>typeof t=="function"?t():t;let l=0;return B(()=>{if(s()){let h=function(f){d||(d=f),c=f-d,o(Math.min((c+l)/v,1)),c+l<v&&(i=requestAnimationFrame(h))};const v=a();let i=null,d=null,c=0;i=requestAnimationFrame(h),U(()=>{cancelAnimationFrame(i),l+=c})}}),n}const Ae=b('<img alt="#">');function De(e){const[t,n]=m(!1),o=ie(()=>e.playing&&t()),s=Pe(o,5e3);return B(()=>{var a;return(a=e.onProgress)==null?void 0:a.call(e,s())}),(()=>{const a=Ae.cloneNode(!0);return a.addEventListener("load",()=>{var l;(l=e.onLoad)==null||l.call(e),n(!0)}),N(()=>O(a,"src",e.src)),a})()}function Me(){const[e,t]=m(null),[n,o]=m(0);return B(()=>{const s=e();if(s){let l=function(){cancelAnimationFrame(a),s.paused||(a=requestAnimationFrame(l)),v()},v=function(){s.duration&&o(s.currentTime/s.duration)},a=null;s.addEventListener("timeupdate",l),U(()=>{cancelAnimationFrame(a),s.removeEventListener("timeupdate",l)})}}),[t,n]}const Be=b("<video autoplay playsinline disablepictureinpicture></video>");function Ne(e){let t;const[n,o]=m(!1),[s,a]=Me();B(()=>{var v;return(v=e.onProgress)==null?void 0:v.call(e,a())}),B(()=>e.playing?t.play():t.pause());function l(){var v;(v=e.onLoad)==null||v.call(e),o(!0)}return(()=>{const v=Be.cloneNode(!0);return(i=>{t=i,s(i)})(v),v.addEventListener("play",l),N(()=>O(v,"src",e.src)),v})()}const Ie=b('<div class="spinner" role="progressbar"><svg class="spinner__svg" fill="transparent"><circle class="spinner__circle" cx="50%" cy="50%" stroke="currentColor"></circle><circle class="spinner__circle " cx="50%" cy="50%" stroke="currentColor" pathLength="1" stroke-dasharray="0.4 0.6"></circle></svg></div>');function ze(e){e=P({size:40,thickness:4},e);const[,t]=Z(e,["size","thickness","class","classList","style"]);return(()=>{const n=Ie.cloneNode(!0),o=n.firstChild,s=o.firstChild,a=s.nextSibling;return G(n,t,!1,!0),N(l=>{const v={[e.class]:Boolean(e.class),...e.classList},i={...e.style,width:`${e.size}px`,height:`${e.size}px`},d=`${(e.size-e.thickness)/2}px`,c=`${e.thickness}px`,h=`${(e.size-e.thickness)/2}px`,f=`${e.thickness}px`;return l._v$=oe(n,v,l._v$),l._v$2=fe(n,i,l._v$2),d!==l._v$3&&O(s,"r",l._v$3=d),c!==l._v$4&&O(s,"stroke-width",l._v$4=c),h!==l._v$5&&O(a,"r",l._v$5=h),f!==l._v$6&&O(a,"stroke-width",l._v$6=f),l},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),n})()}const We=b('<svg viewBox="0 0 20 20" fill="currentColor"><path d="M2.5 16.67 18.07 10 2.5 3.33v5.19L13.61 10 2.5 11.48v5.19Z"></path></svg>'),re=(e={})=>(()=>{const t=We.cloneNode(!0);return G(t,e,!0,!0),t})();const je=b('<div class="story"></div>'),Xe=b('<a target="_blank" class="story__button">\u041E\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u0437\u0430\u044F\u0432\u043A\u0443 </a>'),Ue=b('<button type="button" class="story__button">\u041E\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u0437\u0430\u044F\u0432\u043A\u0443 </button>');function Ve(e){const[,t]=Z(e,["onRequestForm"]),[n,o]=m(!1);return(()=>{const s=je.cloneNode(!0);return k(s,g(Q,P({get component(){return e.type==="image"?De:Ne}},t,{onLoad:()=>o(!0)})),null),k(s,g(H,{get when(){return n()},get fallback(){return g(ze,{class:"story__spinner",size:36,thickness:2})},get children(){return ae(()=>!!e.link,!0)()?(()=>{const a=Xe.cloneNode(!0);return a.firstChild,k(a,g(re,{}),null),N(()=>O(a,"href",e.link)),a})():(()=>{const a=Ue.cloneNode(!0);return a.firstChild,ve(a,"click",e.onRequestForm,!0),k(a,g(re,{}),null),a})()}}),null),s})()}K(["click"]);function Ye(e={}){const[t,n]=m(null);return B(()=>{if(!t())return;var o=t(),s,a,l,v=50,i=250;function d(f){f.pointerType==="touch"&&(o.setPointerCapture(f.pointerId),s=f.clientX,a=f.clientY,l=Date.now(),f.preventDefault())}function c(f){f.pointerType==="touch"&&f.preventDefault()}function h(f){var S,T,u,_,r;if(f.pointerType!=="touch")return;const w=f.clientX-s,y=f.clientY-a,E=Date.now()-l;let $="none";E<=i&&(Math.abs(w)>=v&&Math.abs(w)>Math.abs(y)?$=w<0?"left":"right":Math.abs(y)>=v&&Math.abs(y)>Math.abs(w)&&($=y<0?"up":"down")),$==="left"?(S=e.onSwipedLeft)==null||S.call(e):$==="right"?(T=e.onSwipedRight)==null||T.call(e):$==="up"?(u=e.onSwipedUp)==null||u.call(e):$==="down"&&((_=e.onSwipedDown)==null||_.call(e)),$!=="none"&&((r=e.onSwiped)==null||r.call(e,{dir:$})),f.preventDefault()}o.addEventListener("pointerdown",d),o.addEventListener("pointermove",c),o.addEventListener("pointerup",h),U(()=>{o.removeEventListener("pointerdown",d),o.removeEventListener("pointermove",c),o.removeEventListener("pointerup",h)})}),n}const He=b('<div class="form"></div>');function Ke(e){function t(n){const o=document.querySelector(".request"),s=o.parentElement;n.appendChild(o),U(()=>{s.appendChild(o)})}return g(le,P({variant:"form"},e,{get children(){const n=He.cloneNode(!0),o=t;return typeof o=="function"?o(n):t=n,n}}))}const Ze=b('<div class="stories"><div class="stories__header"><div class="stories__bars"></div><div class="stories__row"><div class="stories__user"><img alt="" class="stories__ava"><div class="stories__info"><h3 class="stories__username"></h3><time class="stories__time"></time></div></div><button type="button" class="stories__close" aria-label="\u0417\u0430\u043A\u0440\u044B\u0442\u044C \u0441\u0442\u043E\u0440\u0438\u0441"></button></div></div><div class="stories__overlay"></div></div>'),Ge=b('<div class="stories__bar"></div>');function Je(e){const[,t]=Z(e,["ava","username","time","stories","onOpen","onOpened","onClose","onClosed"]),[n,o]=m(0),[s,a]=m(!0),[l,v]=m(0),[i,d]=m(!1),[c,h]=m(!1);let f=null;const w=Ye({onSwiped({dir:r}){},onSwipedRight:E,onSwipedLeft:y,onSwipedDown(){var r;(r=e.onRequestClose)==null||r.call(e)}});function y(){o((n()+1)%e.stories.length)}function E(){o((n()-1+e.stories.length)%e.stories.length)}function $(r){v(r),r===1&&y()}function S(r){r.pointerType==="touch"||r.button!==0||(r.target.setPointerCapture(r.pointerId),s()&&(f=setTimeout(()=>{a(!1),f=null},150)),r.preventDefault())}function T(r){r.pointerType==="touch"||r.button!==0||(f&&(clearTimeout(f),f=null,u(r)),a(!0),r.preventDefault())}function u(r){const C=r.currentTarget.getBoundingClientRect();r.clientX-C.left<C.width/2?E():y()}function _(r){r.pointerType==="touch"&&u(r)}return[g(le,P(t,{variant:"stories",closeOnBackdrop:!1,onOpen:()=>{var r;(r=e.onOpen)==null||r.call(e)},onOpened:()=>{var r;d(!0),(r=e.onOpened)==null||r.call(e)},onClose:()=>{var r;a(!1),(r=e.onClose)==null||r.call(e)},onClosed:()=>{var r;o(0),d(!1),v(0),a(!0),(r=e.onClosed)==null||r.call(e)},get children(){const r=Ze.cloneNode(!0),C=r.firstChild,z=C.firstChild,V=z.nextSibling,W=V.firstChild,j=W.firstChild,Y=j.nextSibling,x=Y.firstChild,A=x.nextSibling,q=W.nextSibling,F=C.nextSibling;return k(z,g(ge,{get each(){return e.stories},children:(L,R)=>(()=>{const te=Ge.cloneNode(!0);return N(()=>te.style.setProperty("--progress",R()<n()?1:R()===n()?l():0)),te})()})),k(x,()=>e.username),k(A,()=>e.time),q.$$click=()=>{var L;return(L=e.onRequestClose)==null?void 0:L.call(e)},k(q,g(Oe,{"aria-hidden":"true"})),w(F),F.$$click=_,F.$$pointerup=T,F.$$pointerdown=S,k(r,g(H,{get when(){return ae(()=>!!i(),!0)()&&e.stories[n()]},keyed:!0,children:L=>g(Ve,P(L,{get playing(){return s()},onProgress:$,onRequestForm:()=>h(!0)}))}),null),N(()=>O(j,"src",e.ava)),r}})),g(Ke,{get open(){return c()},onRequestClose:()=>h(!1),onOpen:()=>a(!1),onClose:()=>a(!0)})]}K(["click","pointerdown","pointerup"]);async function Qe(){var d;const e=document.querySelector(".ava");if(!e)return;const t=((d=window.data)==null?void 0:d.stories)||[];t.length||e.classList.add("ava_empty");const n=e.querySelector("video.ava__media"),o=t.find(c=>c.type==="video");n&&o&&(n.src=o.src,n.addEventListener("canplaythrough",()=>{e.classList.add("ava_loaded")}));const[s,a]=m(!1),l=e.querySelector(".ava__stories");e.querySelector(".ava__picture").addEventListener("click",c=>{a(!0),c.preventDefault()}),e.querySelector(".ava__share").addEventListener("click",async()=>{var c;try{await navigator.share((c=window.data)==null?void 0:c.share)}catch(h){console.log(h)}}),he(()=>g(Je,{get ava(){var c;return(c=window.data)==null?void 0:c.ava},get username(){var c;return(c=window.data)==null?void 0:c.username},get time(){var c;return(c=window.data)==null?void 0:c.time},stories:t,get open(){return s()},onRequestClose:()=>a(!1),onOpen:()=>n==null?void 0:n.pause(),onClose:()=>n==null?void 0:n.play()}),l)}Qe();function pe(){const e=document.querySelector(".request");if(!e)return;e.querySelector(".request__form");const t=e.querySelector(".request__input");t.type==="tel"&&_e(t,{mask:"+{7} 000 000 00-00"})}pe();
