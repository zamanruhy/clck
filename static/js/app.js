import{c as _,a as I,b as f,D as ne,m as S,S as U,d as $e,u as ye,e as re,s as Q,f as de,o as fe,g as W,h as p,i as k,j,k as ve,t as w,l as M,n as se,p as be,q as we,F as Ce,r as ke,I as Ee}from"./vendor.js";const ge=$e();function Le(e){const t=ye(ge);if(t)return t;throw new Error(`<${e}> must be used inside a <Transition>`)}function P(e,t){const n=t.filter(s=>s);n.length&&e.classList.add(...n)}function A(e,t){const n=t.filter(s=>s);n.length&&e.classList.remove(...n)}function ie(e){const t=Le("TransitionChild"),[n,s]=_(t.show),[a,o]=_();let l=!0;function $(r,d){var c,v,y,D,E,q,F,B,z,u,g,m,T,X,H,Z,G,J;if(d){if(l){const O=(v=(c=e.enter)==null?void 0:c.split(" "))!=null?v:[],i=(D=(y=e.enterFrom)==null?void 0:y.split(" "))!=null?D:[],h=(q=(E=e.enterTo)==null?void 0:E.split(" "))!=null?q:[],C=(B=(F=e.entered)==null?void 0:F.split(" "))!=null?B:[],x=()=>{var b;A(r,O),A(r,h),P(r,C),(b=e.afterEnter)==null||b.call(e)};(z=e.beforeEnter)==null||z.call(e),P(r,O),P(r,i),requestAnimationFrame(()=>{A(r,i),P(r,h),r.addEventListener("transitionend",x,{once:!0}),r.addEventListener("animationend",x,{once:!0})})}}else{const O=(g=(u=e.leave)==null?void 0:u.split(" "))!=null?g:[],i=(T=(m=e.leaveFrom)==null?void 0:m.split(" "))!=null?T:[],h=(H=(X=e.leaveTo)==null?void 0:X.split(" "))!=null?H:[],C=(G=(Z=e.entered)==null?void 0:Z.split(" "))!=null?G:[];(J=e.beforeLeave)==null||J.call(e),A(r,C),P(r,O),P(r,i),requestAnimationFrame(()=>{A(r,i),P(r,h)});const x=()=>{var b;A(r,O),A(r,h),s(!1),(b=e.afterLeave)==null||b.call(e)};r.addEventListener("transitionend",x,{once:!0}),r.addEventListener("animationend",x,{once:!0})}}return I(()=>{const r=t.show;r&&s(!0);const d=a();d instanceof HTMLElement?$(d,r):l=!0}),f(U,{get when(){var r;return(r=e.unmount)!=null?r:!0},get fallback(){return f(ne,S({get component(){var r;return(r=e.as)!=null?r:"div"}},()=>oe(e,["as","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","unmount","afterEnter","afterLeave","appear","beforeEnter","beforeLeave","entered","ref"]),{ref(r){const d=ce(e,c=>{o(()=>c)});typeof d=="function"&&d(r)},get children(){return e.children}}))},get children(){return f(U,{get when(){return n()},get children(){return f(ne,S({get component(){var r;return(r=e.as)!=null?r:"div"}},()=>oe(e,["as","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","unmount","afterEnter","afterLeave","appear","beforeEnter","beforeLeave","entered","ref"]),{ref(r){const d=ce(e,c=>{o(()=>c)});typeof d=="function"&&d(r)},get children(){return e.children}}))}})}})}function xe(e){const t=oe(e,["show"]);return f(ge.Provider,{value:{get show(){return e.show}},get children(){return f(ie,t)}})}function Se(e){return typeof e=="function"}function ce(e,t){return n=>{"ref"in e&&Se(e.ref)&&e.ref(n),t(n)}}function oe(e,t){const n={},s=Object.keys(e);for(let a=0,o=s.length;a<o;a+=1){const l=s[a];t.includes(l)||Object.defineProperty(n,l,{get(){return e[l]},configurable:!0,enumerable:!0})}return n}const N=new Set;let K=null,te=null;function qe(){return{registerModal:Te,unregisterModal:Fe,trapFocus:De}}function Te(e){N.has(e)||(N.add(e),N.size===1&&(Re(),document.body.style.overflow="hidden"))}function Fe(e){!N.has(e)||(N.delete(e),N.size===0&&(Pe(),document.body.style.overflow=""))}function Oe(){return window.innerWidth>document.documentElement.clientWidth}function Re(){!Oe()||(K=[document.body,...Array.from(document.querySelectorAll("[data-fixed]"))],K.forEach(e=>{const t=e.getAttribute("data-fixed")||"padding",n=e.style[`${t}Right`],s=getComputedStyle(e)[`${t}Right`];e.setAttribute(`data-${t}-right`,n),e.style[`${t}Right`]=`${parseFloat(s)+Ae()}px`}))}function Pe(){K!==null&&(K.forEach(e=>{const t=e.getAttribute("data-fixed")||"padding";e.style[`${t}Right`]=e.getAttribute(`data-${t}-right`),e.removeAttribute(`data-${t}-right`)}),K=null)}function Ae(){if(te===null){const e=document.createElement("div");e.style.cssText=`
      width: 100px;
      height: 100px;
      position: absolute;
      overflow: scroll;
      top: -9999px`,document.body.appendChild(e),te=e.getBoundingClientRect().width-e.clientWidth,document.body.removeChild(e)}return te}function Me(e){const t=["a[href]","area[href]",'input:not([type="hidden"]):not([type="radio"]):not([disabled])','input[type="radio"]:not([disabled]):checked',"select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","audio[controls]","video[controls]","[contenteditable]","[tabindex]"].map(n=>`${n}:not([tabindex^="-"])`).join(", ");return Array.from(e.querySelectorAll(t)).filter(n=>n.offsetWidth||n.offsetHeight||n.getClientRects().length)}function De(e){if(e.key!=="Tab")return;const t=Me(e.currentTarget);if(t.length===0){e.preventDefault();return}const n=t[0],s=t[t.length-1],a=document.activeElement;e.shiftKey?(a===n||a===e.currentTarget)&&(s.focus(),e.preventDefault()):a===s&&(n.focus(),e.preventDefault())}const Be=w('<div class="dialog__content"></div>'),ze=w('<div class="dialog" role="dialog" aria-modal="true" tabindex="-1"></div>');function he(e){e=S({open:!1,closeOnBackdrop:!0,closeOnEscape:!0},e);const[,t]=Q(e,["class","classList","open","closeOnBackdrop","closeOnEscape","children","variant","onOpen","onOpened","onClose","onClosed","onRequestClose"]),[n,s]=_(!1),a=de(()=>e.open&&n()),{registerModal:o,unregisterModal:l,trapFocus:$}=qe();let r,d,c=null;const v={};async function y(){var u;(u=e.onOpen)==null||u.call(e),queueMicrotask(()=>{c=c||document.activeElement,o(v)})}function D(){var u;(u=e.onOpened)==null||u.call(e),z()}function E(){var u;(u=e.onClose)==null||u.call(e)}async function q(){var u,g;(u=e.onClosed)==null||u.call(e),(g=c.focus)==null||g.call(c,{preventScroll:!0}),c=null,l(v)}function F(u){var g;e.closeOnBackdrop&&!d.contains(u.target)&&((g=e.onRequestClose)==null||g.call(e))}function B(u){var g;e.closeOnEscape&&u.key==="Escape"&&((g=e.onRequestClose)==null||g.call(e))}function z(){r.contains(document.activeElement)||r.focus()}return fe(()=>{s(!0),W(()=>{l(v)})}),f(xe,{get show(){return a()},as:"span",get children(){return[f(ie,{class:"dialog-backdrop",get classList(){return{[`dialog-backdrop_${e.variant}`]:Boolean(e.variant)}},enter:"dialog-backdrop_enter",enterFrom:"dialog-backdrop_out",enterTo:"dialog-backdrop_in",leave:"dialog-backdrop_leave",leaveFrom:"dialog-backdrop_in",leaveTo:"dialog-backdrop_out"}),(()=>{const u=ze.cloneNode(!0);u.$$keydown=m=>{B(m),$(m)},u.$$click=F;const g=r;return typeof g=="function"?g(u):r=u,p(u,t,!1,!0),k(u,f(ie,{class:"dialog__wrapper",enter:"dialog__wrapper_enter",enterFrom:"dialog__wrapper_out",enterTo:"dialog__wrapper_in",leave:"dialog__wrapper_leave",leaveFrom:"dialog__wrapper_in",leaveTo:"dialog__wrapper_out",beforeEnter:y,afterEnter:D,beforeLeave:E,afterLeave:q,get children(){const m=Be.cloneNode(!0),T=d;return typeof T=="function"?T(m):d=m,k(m,()=>e.children),m}})),j(m=>ve(u,{[`dialog_${e.variant}`]:Boolean(e.variant),[e.class]:Boolean(e.class),...e.classList},m)),u})()]}})}re(["click","keydown"]);const Ne=w('<svg viewBox="0 0 22 22" fill="currentColor"><path d="m17.42 5.88-1.3-1.3L11 9.71 5.88 4.58l-1.3 1.3L9.71 11l-5.13 5.12 1.3 1.3L11 12.29l5.12 5.13 1.3-1.3L12.29 11l5.13-5.12Z"></path></svg>'),Ie=(e={})=>(()=>{const t=Ne.cloneNode(!0);return p(t,e,!0,!0),t})();function je(e,t){const[n,s]=_(0),a=()=>typeof e=="function"?e():e,o=()=>typeof t=="function"?t():t;let l=0;return I(()=>{if(a()){let v=function(y){d||(d=y),c=y-d,s(Math.min((c+l)/$,1)),c+l<$&&(r=requestAnimationFrame(v))};const $=o();let r=null,d=null,c=0;r=requestAnimationFrame(v),W(()=>{cancelAnimationFrame(r),l+=c})}}),n}const We=w('<img alt="#">');function Xe(e){const[t,n]=_(!1),s=de(()=>e.playing&&t()),a=je(s,5e3);return I(()=>{var o;return(o=e.onProgress)==null?void 0:o.call(e,a())}),(()=>{const o=We.cloneNode(!0);return o.addEventListener("load",()=>{var l;(l=e.onLoad)==null||l.call(e),n(!0)}),j(()=>M(o,"src",e.src)),o})()}function He(){const[e,t]=_(null),[n,s]=_(0);return I(()=>{const a=e();if(a){let l=function(){cancelAnimationFrame(o),a.paused||(o=requestAnimationFrame(l)),$()},$=function(){a.duration&&s(a.currentTime/a.duration)},o=null;a.addEventListener("timeupdate",l),W(()=>{cancelAnimationFrame(o),a.removeEventListener("timeupdate",l)})}}),[t,n]}function Ve(e){const t=window.videoEl,[n,s]=He();I(()=>{var o;return(o=e.onProgress)==null?void 0:o.call(e,s())}),I(()=>e.playing?t.play():t.pause());function a(){var o;(o=e.onLoad)==null||o.call(e)}return n(t),W(()=>{t.pause(),Object.assign(t,{src:t._src,muted:!0,currentTime:0,onloadeddata:null,oncanplay:null,oncanplaythrough:null}),window.avaPicture.appendChild(t)}),se(()=>Object.assign(t,{muted:!1,currentTime:0,src:e.src,onloadeddata:a,oncanplay:a,oncanplaythrough:a}))}const Ye=w('<div class="spinner" role="progressbar"><svg class="spinner__svg" fill="transparent"><circle class="spinner__circle" cx="50%" cy="50%" stroke="currentColor"></circle><circle class="spinner__circle " cx="50%" cy="50%" stroke="currentColor" pathLength="1" stroke-dasharray="0.4 0.6"></circle></svg></div>');function Ke(e){e=S({size:40,thickness:4},e);const[,t]=Q(e,["size","thickness","class","classList","style"]);return(()=>{const n=Ye.cloneNode(!0),s=n.firstChild,a=s.firstChild,o=a.nextSibling;return p(n,t,!1,!0),j(l=>{const $={[e.class]:Boolean(e.class),...e.classList},r={...e.style,width:`${e.size}px`,height:`${e.size}px`},d=`${(e.size-e.thickness)/2}px`,c=`${e.thickness}px`,v=`${(e.size-e.thickness)/2}px`,y=`${e.thickness}px`;return l._v$=ve(n,$,l._v$),l._v$2=be(n,r,l._v$2),d!==l._v$3&&M(a,"r",l._v$3=d),c!==l._v$4&&M(a,"stroke-width",l._v$4=c),v!==l._v$5&&M(o,"r",l._v$5=v),y!==l._v$6&&M(o,"stroke-width",l._v$6=y),l},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),n})()}const Ue=w('<svg viewBox="0 0 20 20" fill="currentColor"><path d="M2.5 16.67 18.07 10 2.5 3.33v5.19L13.61 10 2.5 11.48v5.19Z"></path></svg>'),ue=(e={})=>(()=>{const t=Ue.cloneNode(!0);return p(t,e,!0,!0),t})();const Ze=w('<div class="story"></div>'),Ge=w('<a target="_blank" class="story__button">\u041E\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u0437\u0430\u044F\u0432\u043A\u0443 </a>'),Je=w('<button type="button" class="story__button">\u041E\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u0437\u0430\u044F\u0432\u043A\u0443 </button>');function Qe(e){const[,t]=Q(e,["onRequestForm"]),[n,s]=_(!1);return(()=>{const a=Ze.cloneNode(!0);return k(a,f(ne,S({get component(){return e.type==="image"?Xe:Ve}},t,{onLoad:()=>s(!0)})),null),k(a,f(U,{get when(){return n()},get fallback(){return f(Ke,{class:"story__spinner",size:36,thickness:2})},get children(){return se(()=>!!e.link,!0)()?(()=>{const o=Ge.cloneNode(!0);return o.firstChild,k(o,f(ue,{}),null),j(()=>M(o,"href",e.link)),o})():(()=>{const o=Je.cloneNode(!0);return o.firstChild,we(o,"click",e.onRequestForm,!0),k(o,f(ue,{}),null),o})()}}),null),a})()}re(["click"]);const pe=w('<div class="form"></div>');function et(e){function t(n){const s=document.querySelector(".request"),a=s.parentElement;n.appendChild(s),W(()=>{a.appendChild(s)})}return f(he,S({variant:"form"},e,{get children(){const n=pe.cloneNode(!0),s=t;return typeof s=="function"?s(n):t=n,n}}))}const tt=w('<div class="stories"><div class="stories__header"><div class="stories__bars"></div><div class="stories__row"><div class="stories__user"><img alt="" class="stories__ava"><div class="stories__info"><h3 class="stories__username"></h3><time class="stories__time"></time></div></div><button type="button" class="stories__close" aria-label="\u0417\u0430\u043A\u0440\u044B\u0442\u044C \u0441\u0442\u043E\u0440\u0438\u0441"></button></div></div><div class="stories__overlay"></div></div>'),nt=w('<div class="stories__bar"></div>');function it(e){const[,t]=Q(e,["ava","username","time","stories","onOpen","onOpened","onClose","onClosed"]),[n,s]=_(0),[a,o]=_(!0),[l,$]=_(0),[r,d]=_(!1),[c,v]=_(!1),[y,D]=_(1);let E=null;function q(){var i;n()<e.stories.length-1?s((n()+1)%e.stories.length):(i=e.onRequestClose)==null||i.call(e)}function F(){n()!==0?s((n()-1+e.stories.length)%e.stories.length):D(y()+1)}function B(i){$(i),i===1&&q()}const[z,u]=_(0);fe(()=>{function i(){u(document.documentElement.clientHeight)}i(),window.addEventListener("resize",i),W(()=>{window.removeEventListener("resize",i)})});let g,m,T,X=50,H=200;function Z(i){i.target.setPointerCapture(i.pointerId),g=i.clientX,m=i.clientY,T=Date.now(),a()&&(E=setTimeout(()=>{o(!1),E=null},H)),i.preventDefault()}function G(i){i.preventDefault()}function J(i){var V;if(!a()){o(!0);return}E&&(clearTimeout(E),E=null);const h=i.clientX-g,C=i.clientY-m,x=Date.now()-T;let b="none";x<=H&&(Math.abs(h)>=X&&Math.abs(h)>Math.abs(C)?b=h<0?"left":"right":Math.abs(C)>=X&&Math.abs(C)>Math.abs(h)&&(b=C<0?"up":"down")),b==="left"?q():b==="right"?F():b==="down"?(V=e.onRequestClose)==null||V.call(e):O(i),i.preventDefault()}function O(i){const h=i.currentTarget.getBoundingClientRect();i.clientX-h.left<h.width/2?F():q(),i.preventDefault()}return[f(he,S(t,{variant:"stories",closeOnBackdrop:!1,onOpen:()=>{var i;(i=e.onOpen)==null||i.call(e)},onOpened:()=>{var i;d(!0),(i=e.onOpened)==null||i.call(e)},onClose:()=>{var i;o(!1),(i=e.onClose)==null||i.call(e)},onClosed:()=>{var i;s(0),d(!1),$(0),o(!0),(i=e.onClosed)==null||i.call(e)},get children(){const i=tt.cloneNode(!0),h=i.firstChild,C=h.firstChild,x=C.nextSibling,b=x.firstChild,V=b.firstChild,_e=V.nextSibling,ae=_e.firstChild,me=ae.nextSibling,le=b.nextSibling,ee=h.nextSibling;return k(C,f(Ce,{get each(){return e.stories},children:(L,R)=>(()=>{const Y=nt.cloneNode(!0);return j(()=>Y.style.setProperty("--progress",R()<n()?1:R()===n()?l():0)),Y})()})),k(ae,()=>e.username),k(me,()=>e.time),le.$$click=()=>{var L;return(L=e.onRequestClose)==null?void 0:L.call(e)},k(le,f(Ie,{"aria-hidden":"true"})),ee.$$pointerup=J,ee.$$pointermove=G,ee.$$pointerdown=Z,k(i,f(U,{get when(){return y()},keyed:!0,children:L=>f(U,{get when(){return se(()=>!!(y()&&r()),!0)()&&e.stories[n()]},keyed:!0,children:R=>f(Qe,S(R,{get playing(){return a()},onProgress:B,onRequestForm:()=>v(!0)}))})}),null),j(L=>{const R=z(),Y=e.ava;return R!==L._v$&&i.style.setProperty("--height",L._v$=R),Y!==L._v$2&&M(V,"src",L._v$2=Y),L},{_v$:void 0,_v$2:void 0}),i}})),f(et,{get open(){return c()},onRequestClose:()=>v(!1),onOpen:()=>o(!1),onClose:()=>o(!0)})]}re(["click","pointerdown","pointermove","pointerup"]);async function ot(){var d;const e=document.querySelector(".ava");if(!e)return;const t=((d=window.data)==null?void 0:d.stories)||[];t.length||e.classList.add("ava_empty");const n=e.querySelector("video.ava__media"),s=t.find(c=>c.type==="video");n&&s&&(n.src=s.src,n.addEventListener("canplaythrough",()=>{e.classList.add("ava_loaded")}),window.videoEl.src=window.videoEl._src=s.src);const[a,o]=_(!1),l=e.querySelector(".ava__stories");e.querySelector(".ava__picture").addEventListener("click",c=>{c.preventDefault(),o(!0),window.videoEl.play()}),e.querySelector(".ava__share").addEventListener("click",async()=>{var c;try{await navigator.share((c=window.data)==null?void 0:c.share)}catch(v){console.log(v)}}),ke(()=>f(it,S(()=>{var c;return(c=window.data)==null?void 0:c.summary},{stories:t,get open(){return a()},onRequestClose:()=>o(!1),onOpen:()=>n==null?void 0:n.pause(),onClose:()=>n==null?void 0:n.play()})),l)}ot();function rt(){const e=document.querySelector(".request");if(!e)return;e.querySelector(".request__form");const t=e.querySelector(".request__input");t.type==="tel"&&Ee(t,{mask:"+{7} 000 000 00-00"})}rt();
