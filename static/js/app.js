import{d as J,c as $,a as z,b as v,D as te,m as A,S as G,e as fe,u as ve,s as Q,f as ae,o as se,g as p,i as C,h as I,t as w,j,k as le,l as P,n as ge,p as ce,q as he,F as _e,r as me,I as $e}from"./vendor.js";J(["click"]);const ue=fe();function ye(e){const t=ve(ue);if(t)return t;throw new Error(`<${e}> must be used inside a <Transition>`)}function D(e,t){const n=t.filter(r=>r);n.length&&e.classList.add(...n)}function N(e,t){const n=t.filter(r=>r);n.length&&e.classList.remove(...n)}function ne(e){const t=ye("TransitionChild"),[n,r]=$(t.show),[s,i]=$();let l=!0;function _(o,d){var c,g,f,L,b,S,y,T,x,u,h,m,M,a,q,X,Z,H;if(d){if(l){const F=(g=(c=e.enter)==null?void 0:c.split(" "))!=null?g:[],B=(L=(f=e.enterFrom)==null?void 0:f.split(" "))!=null?L:[],R=(S=(b=e.enterTo)==null?void 0:b.split(" "))!=null?S:[],U=(T=(y=e.entered)==null?void 0:y.split(" "))!=null?T:[],O=()=>{var k;N(o,F),N(o,R),D(o,U),(k=e.afterEnter)==null||k.call(e)};(x=e.beforeEnter)==null||x.call(e),D(o,F),D(o,B),requestAnimationFrame(()=>{N(o,B),D(o,R),o.addEventListener("transitionend",O,{once:!0}),o.addEventListener("animationend",O,{once:!0})})}}else{const F=(h=(u=e.leave)==null?void 0:u.split(" "))!=null?h:[],B=(M=(m=e.leaveFrom)==null?void 0:m.split(" "))!=null?M:[],R=(q=(a=e.leaveTo)==null?void 0:a.split(" "))!=null?q:[],U=(Z=(X=e.entered)==null?void 0:X.split(" "))!=null?Z:[];(H=e.beforeLeave)==null||H.call(e),N(o,U),D(o,F),D(o,B),requestAnimationFrame(()=>{N(o,B),D(o,R)});const O=()=>{var k;N(o,F),N(o,R),r(!1),(k=e.afterLeave)==null||k.call(e)};o.addEventListener("transitionend",O,{once:!0}),o.addEventListener("animationend",O,{once:!0})}}return z(()=>{const o=t.show;o&&r(!0);const d=s();d instanceof HTMLElement?_(d,o):l=!0}),v(G,{get when(){var o;return(o=e.unmount)!=null?o:!0},get fallback(){return v(te,A({get component(){var o;return(o=e.as)!=null?o:"div"}},()=>ie(e,["as","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","unmount","afterEnter","afterLeave","appear","beforeEnter","beforeLeave","entered","ref"]),{ref(o){const d=re(e,c=>{i(()=>c)});typeof d=="function"&&d(o)},get children(){return e.children}}))},get children(){return v(G,{get when(){return n()},get children(){return v(te,A({get component(){var o;return(o=e.as)!=null?o:"div"}},()=>ie(e,["as","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","unmount","afterEnter","afterLeave","appear","beforeEnter","beforeLeave","entered","ref"]),{ref(o){const d=re(e,c=>{i(()=>c)});typeof d=="function"&&d(o)},get children(){return e.children}}))}})}})}function be(e){const t=ie(e,["show"]);return v(ue.Provider,{value:{get show(){return e.show}},get children(){return v(ne,t)}})}function we(e){return typeof e=="function"}function re(e,t){return n=>{"ref"in e&&we(e.ref)&&e.ref(n),t(n)}}function ie(e,t){const n={},r=Object.keys(e);for(let s=0,i=r.length;s<i;s+=1){const l=r[s];t.includes(l)||Object.defineProperty(n,l,{get(){return e[l]},configurable:!0,enumerable:!0})}return n}const W=new Set;let K=null,ee=null;function Le(){return{registerModal:Ee,unregisterModal:Ce,trapFocus:Fe}}function Ee(e){W.has(e)||(W.add(e),W.size===1&&(Se(),document.body.style.overflow="hidden"))}function Ce(e){!W.has(e)||(W.delete(e),W.size===0&&(Te(),document.body.style.overflow=""))}function ke(){return window.innerWidth>document.documentElement.clientWidth}function Se(){!ke()||(K=[document.body,...Array.from(document.querySelectorAll("[data-fixed]"))],K.forEach(e=>{const t=e.getAttribute("data-fixed")||"padding",n=e.style[`${t}Right`],r=getComputedStyle(e)[`${t}Right`];e.setAttribute(`data-${t}-right`,n),e.style[`${t}Right`]=`${parseFloat(r)+xe()}px`}))}function Te(){K!==null&&(K.forEach(e=>{const t=e.getAttribute("data-fixed")||"padding";e.style[`${t}Right`]=e.getAttribute(`data-${t}-right`),e.removeAttribute(`data-${t}-right`)}),K=null)}function xe(){if(ee===null){const e=document.createElement("div");e.style.cssText=`
      width: 100px;
      height: 100px;
      position: absolute;
      overflow: scroll;
      top: -9999px`,document.body.appendChild(e),ee=e.getBoundingClientRect().width-e.clientWidth,document.body.removeChild(e)}return ee}function qe(e){const t=["a[href]","area[href]",'input:not([type="hidden"]):not([type="radio"]):not([disabled])','input[type="radio"]:not([disabled]):checked',"select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","audio[controls]","video[controls]","[contenteditable]","[tabindex]"].map(n=>`${n}:not([tabindex^="-"])`).join(", ");return Array.from(e.querySelectorAll(t)).filter(n=>n.offsetWidth||n.offsetHeight||n.getClientRects().length)}function Fe(e){if(e.key!=="Tab")return;const t=qe(e.currentTarget);if(t.length===0){e.preventDefault();return}const n=t[0],r=t[t.length-1],s=document.activeElement;e.shiftKey?(s===n||s===e.currentTarget)&&(r.focus(),e.preventDefault()):s===r&&(n.focus(),e.preventDefault())}const Re=w('<div class="dialog__content"></div>'),Oe=w('<div class="dialog" role="dialog" aria-modal="true" tabindex="-1"></div>');function de(e){e=A({open:!1,closeOnBackdrop:!0,closeOnEscape:!0},e);const[,t]=Q(e,["class","classList","open","closeOnBackdrop","closeOnEscape","children","variant","onOpen","onOpened","onClose","onClosed","onRequestClose"]),[n,r]=$(!1),s=ae(()=>e.open&&n()),{registerModal:i,unregisterModal:l,trapFocus:_}=Le();let o,d,c=null;const g={};async function f(){var u;(u=e.onOpen)==null||u.call(e),queueMicrotask(()=>{c=c||document.activeElement,i(g)})}function L(){var u;(u=e.onOpened)==null||u.call(e),x()}function b(){var u;(u=e.onClose)==null||u.call(e)}async function S(){var u,h;(u=e.onClosed)==null||u.call(e),(h=c.focus)==null||h.call(c,{preventScroll:!0}),c=null,l(g)}function y(u){var h;e.closeOnBackdrop&&!d.contains(u.target)&&((h=e.onRequestClose)==null||h.call(e))}function T(u){var h;e.closeOnEscape&&u.key==="Escape"&&((h=e.onRequestClose)==null||h.call(e))}function x(){o.contains(document.activeElement)||o.focus()}return se(()=>{r(!0),j(()=>{l(g)})}),v(be,{get show(){return s()},as:"span",get children(){return[v(ne,{class:"dialog-backdrop",get classList(){return{[`dialog-backdrop_${e.variant}`]:Boolean(e.variant)}},enter:"dialog-backdrop_enter",enterFrom:"dialog-backdrop_out",enterTo:"dialog-backdrop_in",leave:"dialog-backdrop_leave",leaveFrom:"dialog-backdrop_in",leaveTo:"dialog-backdrop_out"}),(()=>{const u=Oe.cloneNode(!0);u.$$keydown=m=>{T(m),_(m)},u.$$click=y;const h=o;return typeof h=="function"?h(u):o=u,p(u,t,!1,!0),C(u,v(ne,{class:"dialog__wrapper",enter:"dialog__wrapper_enter",enterFrom:"dialog__wrapper_out",enterTo:"dialog__wrapper_in",leave:"dialog__wrapper_leave",leaveFrom:"dialog__wrapper_in",leaveTo:"dialog__wrapper_out",beforeEnter:f,afterEnter:L,beforeLeave:b,afterLeave:S,get children(){const m=Re.cloneNode(!0),M=d;return typeof M=="function"?M(m):d=m,C(m,()=>e.children),m}})),I(m=>le(u,{[`dialog_${e.variant}`]:Boolean(e.variant),[e.class]:Boolean(e.class),...e.classList},m)),u})()]}})}J(["click","keydown"]);const Pe=w('<svg viewBox="0 0 22 22" fill="currentColor"><path d="m17.42 5.88-1.3-1.3L11 9.71 5.88 4.58l-1.3 1.3L9.71 11l-5.13 5.12 1.3 1.3L11 12.29l5.12 5.13 1.3-1.3L12.29 11l5.13-5.12Z"></path></svg>'),Ae=(e={})=>(()=>{const t=Pe.cloneNode(!0);return p(t,e,!0,!0),t})();function Me(e,t){const[n,r]=$(0),s=()=>typeof e=="function"?e():e,i=()=>typeof t=="function"?t():t;let l=0;return z(()=>{if(s()){let g=function(f){d||(d=f),c=f-d,r(Math.min((c+l)/_,1)),c+l<_&&(o=requestAnimationFrame(g))};const _=i();let o=null,d=null,c=0;o=requestAnimationFrame(g),j(()=>{cancelAnimationFrame(o),l+=c})}}),n}const Be=w('<img alt="#">');function De(e){const[t,n]=$(!1),r=ae(()=>e.playing&&t()),s=Me(r,5e3);return z(()=>{var i;return(i=e.onProgress)==null?void 0:i.call(e,s())}),(()=>{const i=Be.cloneNode(!0);return i.addEventListener("load",()=>{var l;(l=e.onLoad)==null||l.call(e),n(!0)}),I(()=>P(i,"src",e.src)),i})()}function Ne(){const[e,t]=$(null),[n,r]=$(0);return z(()=>{const s=e();if(s){let l=function(){cancelAnimationFrame(i),s.paused||(i=requestAnimationFrame(l)),_()},_=function(){s.duration&&r(s.currentTime/s.duration)},i=null;s.addEventListener("timeupdate",l),j(()=>{cancelAnimationFrame(i),s.removeEventListener("timeupdate",l)})}}),[t,n]}const ze=w("<video muted playsinline disablepictureinpicture></video>");function Ie(e){let t;const[n,r]=Ne();z(()=>{var i;return(i=e.onProgress)==null?void 0:i.call(e,r())}),z(()=>e.playing?t.play():t.pause());function s(){var i;(i=e.onLoad)==null||i.call(e),setTimeout(()=>{console.log("some"),t.play()},1e3)}return(()=>{const i=ze.cloneNode(!0);return(l=>{t=l,n(l)})(i),i.addEventListener("canplaythrough",s),i.addEventListener("canplay",s),I(()=>P(i,"src",e.src)),i})()}const We=w('<div class="spinner" role="progressbar"><svg class="spinner__svg" fill="transparent"><circle class="spinner__circle" cx="50%" cy="50%" stroke="currentColor"></circle><circle class="spinner__circle " cx="50%" cy="50%" stroke="currentColor" pathLength="1" stroke-dasharray="0.4 0.6"></circle></svg></div>');function je(e){e=A({size:40,thickness:4},e);const[,t]=Q(e,["size","thickness","class","classList","style"]);return(()=>{const n=We.cloneNode(!0),r=n.firstChild,s=r.firstChild,i=s.nextSibling;return p(n,t,!1,!0),I(l=>{const _={[e.class]:Boolean(e.class),...e.classList},o={...e.style,width:`${e.size}px`,height:`${e.size}px`},d=`${(e.size-e.thickness)/2}px`,c=`${e.thickness}px`,g=`${(e.size-e.thickness)/2}px`,f=`${e.thickness}px`;return l._v$=le(n,_,l._v$),l._v$2=ge(n,o,l._v$2),d!==l._v$3&&P(s,"r",l._v$3=d),c!==l._v$4&&P(s,"stroke-width",l._v$4=c),g!==l._v$5&&P(i,"r",l._v$5=g),f!==l._v$6&&P(i,"stroke-width",l._v$6=f),l},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),n})()}const Xe=w('<svg viewBox="0 0 20 20" fill="currentColor"><path d="M2.5 16.67 18.07 10 2.5 3.33v5.19L13.61 10 2.5 11.48v5.19Z"></path></svg>'),oe=(e={})=>(()=>{const t=Xe.cloneNode(!0);return p(t,e,!0,!0),t})();const He=w('<div class="story"></div>'),Ue=w('<a target="_blank" class="story__button">\u041E\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u0437\u0430\u044F\u0432\u043A\u0443 </a>'),Ve=w('<button type="button" class="story__button">\u041E\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u0437\u0430\u044F\u0432\u043A\u0443 </button>');function Ye(e){const[,t]=Q(e,["onRequestForm"]),[n,r]=$(!1);return(()=>{const s=He.cloneNode(!0);return C(s,v(te,A({get component(){return e.type==="image"?De:Ie}},t,{onLoad:()=>r(!0)})),null),C(s,v(G,{get when(){return n()},get fallback(){return v(je,{class:"story__spinner",size:36,thickness:2})},get children(){return ce(()=>!!e.link,!0)()?(()=>{const i=Ue.cloneNode(!0);return i.firstChild,C(i,v(oe,{}),null),I(()=>P(i,"href",e.link)),i})():(()=>{const i=Ve.cloneNode(!0);return i.firstChild,he(i,"click",e.onRequestForm,!0),C(i,v(oe,{}),null),i})()}}),null),s})()}J(["click"]);function Ke(e={}){const[t,n]=$(null);return z(()=>{if(!t())return;var r=t(),s,i,l,_=50,o=250;function d(f){f.pointerType==="touch"&&(r.setPointerCapture(f.pointerId),s=f.clientX,i=f.clientY,l=Date.now())}function c(f){f.pointerType}function g(f){var T,x,u,h,m;if(f.pointerType!=="touch")return;const L=f.clientX-s,b=f.clientY-i,S=Date.now()-l;let y="none";S<=o&&(Math.abs(L)>=_&&Math.abs(L)>Math.abs(b)?y=L<0?"left":"right":Math.abs(b)>=_&&Math.abs(b)>Math.abs(L)&&(y=b<0?"up":"down")),y==="left"?(T=e.onSwipedLeft)==null||T.call(e):y==="right"?(x=e.onSwipedRight)==null||x.call(e):y==="up"?(u=e.onSwipedUp)==null||u.call(e):y==="down"&&((h=e.onSwipedDown)==null||h.call(e)),y!=="none"&&((m=e.onSwiped)==null||m.call(e,{dir:y}))}r.addEventListener("pointerdown",d),r.addEventListener("pointermove",c),r.addEventListener("pointerup",g),j(()=>{r.removeEventListener("pointerdown",d),r.removeEventListener("pointermove",c),r.removeEventListener("pointerup",g)})}),n}const Ze=w('<div class="form"></div>');function Ge(e){function t(n){const r=document.querySelector(".request"),s=r.parentElement;n.appendChild(r),j(()=>{s.appendChild(r)})}return v(de,A({variant:"form"},e,{get children(){const n=Ze.cloneNode(!0),r=t;return typeof r=="function"?r(n):t=n,n}}))}const Je=w('<div class="stories"><div class="stories__header"><div class="stories__bars"></div><div class="stories__row"><div class="stories__user"><img alt="" class="stories__ava"><div class="stories__info"><h3 class="stories__username"></h3><time class="stories__time"></time></div></div><button type="button" class="stories__close" aria-label="\u0417\u0430\u043A\u0440\u044B\u0442\u044C \u0441\u0442\u043E\u0440\u0438\u0441"></button></div></div><div class="stories__overlay"></div></div>'),Qe=w('<div class="stories__bar"></div>');function pe(e){const[,t]=Q(e,["ava","username","time","stories","onOpen","onOpened","onClose","onClosed"]),[n,r]=$(0),[s,i]=$(!0),[l,_]=$(0),[o,d]=$(!1),[c,g]=$(!1);let f=null;const L=Ke({onSwiped({dir:a}){},onSwipedRight:S,onSwipedLeft:b,onSwipedDown(){var a;(a=e.onRequestClose)==null||a.call(e)}});function b(){r((n()+1)%e.stories.length)}function S(){r((n()-1+e.stories.length)%e.stories.length)}function y(a){_(a),a===1&&b()}function T(a){a.pointerType==="touch"||a.button!==0||(a.target.setPointerCapture(a.pointerId),s()&&(f=setTimeout(()=>{i(!1),f=null},150)))}function x(a){a.pointerType==="touch"||a.button!==0||(f&&(clearTimeout(f),f=null,u(a)),i(!0))}function u(a){const q=a.currentTarget.getBoundingClientRect();a.clientX-q.left<q.width/2?S():b()}function h(a){a.pointerType==="touch"&&u(a)}const[m,M]=$(0);return se(()=>{function a(){M(document.documentElement.clientHeight)}a(),window.addEventListener("resize",a),j(()=>{window.removeEventListener("resize",a)})}),[v(de,A(t,{variant:"stories",closeOnBackdrop:!1,onOpen:()=>{var a;(a=e.onOpen)==null||a.call(e)},onOpened:()=>{var a;d(!0),(a=e.onOpened)==null||a.call(e)},onClose:()=>{var a;i(!1),(a=e.onClose)==null||a.call(e)},onClosed:()=>{var a;r(0),d(!1),_(0),i(!0),(a=e.onClosed)==null||a.call(e)},get children(){const a=Je.cloneNode(!0),q=a.firstChild,X=q.firstChild,Z=X.nextSibling,H=Z.firstChild,F=H.firstChild,B=F.nextSibling,R=B.firstChild,U=R.nextSibling,O=H.nextSibling,k=q.nextSibling;return C(X,v(_e,{get each(){return e.stories},children:(E,V)=>(()=>{const Y=Qe.cloneNode(!0);return I(()=>Y.style.setProperty("--progress",V()<n()?1:V()===n()?l():0)),Y})()})),C(R,()=>e.username),C(U,()=>e.time),O.$$click=()=>{var E;return(E=e.onRequestClose)==null?void 0:E.call(e)},C(O,v(Ae,{"aria-hidden":"true"})),L(k),k.$$click=h,k.$$pointerup=x,k.$$pointerdown=T,C(a,v(G,{get when(){return ce(()=>!!o(),!0)()&&e.stories[n()]},keyed:!0,children:E=>v(Ye,A(E,{get playing(){return s()},onProgress:y,onRequestForm:()=>g(!0)}))}),null),I(E=>{const V=m(),Y=e.ava;return V!==E._v$&&a.style.setProperty("--height",E._v$=V),Y!==E._v$2&&P(F,"src",E._v$2=Y),E},{_v$:void 0,_v$2:void 0}),a}})),v(Ge,{get open(){return c()},onRequestClose:()=>g(!1),onOpen:()=>i(!1),onClose:()=>i(!0)})]}J(["click","pointerdown","pointerup"]);async function et(){var d;const e=document.querySelector(".ava");if(!e)return;const t=((d=window.data)==null?void 0:d.stories)||[];t.length||e.classList.add("ava_empty");const n=e.querySelector("video.ava__media"),r=t.find(c=>c.type==="video");n&&r&&(n.src=r.src,n.addEventListener("canplaythrough",()=>{e.classList.add("ava_loaded")}));const[s,i]=$(!1),l=e.querySelector(".ava__stories");e.querySelector(".ava__picture").addEventListener("click",c=>{i(!0),c.preventDefault()}),e.querySelector(".ava__share").addEventListener("click",async()=>{var c;try{await navigator.share((c=window.data)==null?void 0:c.share)}catch(g){console.log(g)}}),me(()=>v(pe,{get ava(){var c;return(c=window.data)==null?void 0:c.ava},get username(){var c;return(c=window.data)==null?void 0:c.username},get time(){var c;return(c=window.data)==null?void 0:c.time},stories:t,get open(){return s()},onRequestClose:()=>i(!1),onOpen:()=>n==null?void 0:n.pause(),onClose:()=>n==null?void 0:n.play()}),l)}et();function tt(){const e=document.querySelector(".request");if(!e)return;e.querySelector(".request__form");const t=e.querySelector(".request__input");t.type==="tel"&&$e(t,{mask:"+{7} 000 000 00-00"})}tt();
