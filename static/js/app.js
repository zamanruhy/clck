import{d as K,c as $,a as B,b as f,D as Q,m as A,S as U,e as le,u as de,s as Z,f as ie,o as re,g as G,i as C,h as D,t as w,j as z,k as oe,l as O,n as ue,p as ae,q as fe,F as ve,r as ge,I as he}from"./vendor.js";K(["click"]);const se=le();function _e(e){const t=de(se);if(t)return t;throw new Error(`<${e}> must be used inside a <Transition>`)}function P(e,t){const n=t.filter(a=>a);n.length&&e.classList.add(...n)}function M(e,t){const n=t.filter(a=>a);n.length&&e.classList.remove(...n)}function p(e){const t=_e("TransitionChild"),[n,a]=$(t.show),[c,r]=$();let s=!0;function h(o,d){var l,v,_,b,L,E,T,y,x,i,u,g,S,I,j,V,W,Y;if(d){if(s){const F=(v=(l=e.enter)==null?void 0:l.split(" "))!=null?v:[],R=(b=(_=e.enterFrom)==null?void 0:_.split(" "))!=null?b:[],m=(E=(L=e.enterTo)==null?void 0:L.split(" "))!=null?E:[],q=(y=(T=e.entered)==null?void 0:T.split(" "))!=null?y:[],k=()=>{var X;M(o,F),M(o,m),P(o,q),(X=e.afterEnter)==null||X.call(e)};(x=e.beforeEnter)==null||x.call(e),P(o,F),P(o,R),requestAnimationFrame(()=>{M(o,R),P(o,m),o.addEventListener("transitionend",k,{once:!0}),o.addEventListener("animationend",k,{once:!0})})}}else{const F=(u=(i=e.leave)==null?void 0:i.split(" "))!=null?u:[],R=(S=(g=e.leaveFrom)==null?void 0:g.split(" "))!=null?S:[],m=(j=(I=e.leaveTo)==null?void 0:I.split(" "))!=null?j:[],q=(W=(V=e.entered)==null?void 0:V.split(" "))!=null?W:[];(Y=e.beforeLeave)==null||Y.call(e),M(o,q),P(o,F),P(o,R),requestAnimationFrame(()=>{M(o,R),P(o,m)});const k=()=>{var X;M(o,F),M(o,m),a(!1),(X=e.afterLeave)==null||X.call(e)};o.addEventListener("transitionend",k,{once:!0}),o.addEventListener("animationend",k,{once:!0})}}return B(()=>{const o=t.show;o&&a(!0);const d=c();d instanceof HTMLElement?h(d,o):s=!0}),f(U,{get when(){var o;return(o=e.unmount)!=null?o:!0},get fallback(){return f(Q,A({get component(){var o;return(o=e.as)!=null?o:"div"}},()=>ee(e,["as","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","unmount","afterEnter","afterLeave","appear","beforeEnter","beforeLeave","entered","ref"]),{ref(o){const d=te(e,l=>{r(()=>l)});typeof d=="function"&&d(o)},get children(){return e.children}}))},get children(){return f(U,{get when(){return n()},get children(){return f(Q,A({get component(){var o;return(o=e.as)!=null?o:"div"}},()=>ee(e,["as","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","unmount","afterEnter","afterLeave","appear","beforeEnter","beforeLeave","entered","ref"]),{ref(o){const d=te(e,l=>{r(()=>l)});typeof d=="function"&&d(o)},get children(){return e.children}}))}})}})}function me(e){const t=ee(e,["show"]);return f(se.Provider,{value:{get show(){return e.show}},get children(){return f(p,t)}})}function $e(e){return typeof e=="function"}function te(e,t){return n=>{"ref"in e&&$e(e.ref)&&e.ref(n),t(n)}}function ee(e,t){const n={},a=Object.keys(e);for(let c=0,r=a.length;c<r;c+=1){const s=a[c];t.includes(s)||Object.defineProperty(n,s,{get(){return e[s]},configurable:!0,enumerable:!0})}return n}const N=new Set;let H=null,J=null;function ye(){return{registerModal:be,unregisterModal:we,trapFocus:xe}}function be(e){N.has(e)||(N.add(e),N.size===1&&(Ee(),document.body.style.overflow="hidden"))}function we(e){!N.has(e)||(N.delete(e),N.size===0&&(ke(),document.body.style.overflow=""))}function Le(){return window.innerWidth>document.documentElement.clientWidth}function Ee(){!Le()||(H=[document.body,...Array.from(document.querySelectorAll("[data-fixed]"))],H.forEach(e=>{const t=e.getAttribute("data-fixed")||"padding",n=e.style[`${t}Right`],a=getComputedStyle(e)[`${t}Right`];e.setAttribute(`data-${t}-right`,n),e.style[`${t}Right`]=`${parseFloat(a)+Ce()}px`}))}function ke(){H!==null&&(H.forEach(e=>{const t=e.getAttribute("data-fixed")||"padding";e.style[`${t}Right`]=e.getAttribute(`data-${t}-right`),e.removeAttribute(`data-${t}-right`)}),H=null)}function Ce(){if(J===null){const e=document.createElement("div");e.style.cssText=`
      width: 100px;
      height: 100px;
      position: absolute;
      overflow: scroll;
      top: -9999px`,document.body.appendChild(e),J=e.getBoundingClientRect().width-e.clientWidth,document.body.removeChild(e)}return J}function Se(e){const t=["a[href]","area[href]",'input:not([type="hidden"]):not([type="radio"]):not([disabled])','input[type="radio"]:not([disabled]):checked',"select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","audio[controls]","video[controls]","[contenteditable]","[tabindex]"].map(n=>`${n}:not([tabindex^="-"])`).join(", ");return Array.from(e.querySelectorAll(t)).filter(n=>n.offsetWidth||n.offsetHeight||n.getClientRects().length)}function xe(e){if(e.key!=="Tab")return;const t=Se(e.currentTarget);if(t.length===0){e.preventDefault();return}const n=t[0],a=t[t.length-1],c=document.activeElement;e.shiftKey?(c===n||c===e.currentTarget)&&(a.focus(),e.preventDefault()):c===a&&(n.focus(),e.preventDefault())}const qe=w('<div class="dialog__content"></div>'),Te=w('<div class="dialog" role="dialog" aria-modal="true" tabindex="-1"></div>');function ce(e){e=A({open:!1,closeOnBackdrop:!0,closeOnEscape:!0},e);const[,t]=Z(e,["class","classList","open","closeOnBackdrop","closeOnEscape","children","variant","onOpen","onOpened","onClose","onClosed","onRequestClose"]),[n,a]=$(!1),c=ie(()=>e.open&&n()),{registerModal:r,unregisterModal:s,trapFocus:h}=ye();let o,d,l=null;const v={};async function _(){var i;(i=e.onOpen)==null||i.call(e),queueMicrotask(()=>{l=l||document.activeElement,r(v)})}function b(){var i;(i=e.onOpened)==null||i.call(e),x()}function L(){var i;(i=e.onClose)==null||i.call(e)}async function E(){var i,u;(i=e.onClosed)==null||i.call(e),(u=l.focus)==null||u.call(l,{preventScroll:!0}),l=null,s(v)}function T(i){var u;e.closeOnBackdrop&&!d.contains(i.target)&&((u=e.onRequestClose)==null||u.call(e))}function y(i){var u;e.closeOnEscape&&i.key==="Escape"&&((u=e.onRequestClose)==null||u.call(e))}function x(){o.contains(document.activeElement)||o.focus()}return re(()=>{a(!0),z(()=>{s(v)})}),f(me,{get show(){return c()},as:"span",get children(){return[f(p,{class:"dialog-backdrop",get classList(){return{[`dialog-backdrop_${e.variant}`]:Boolean(e.variant)}},enter:"dialog-backdrop_enter",enterFrom:"dialog-backdrop_out",enterTo:"dialog-backdrop_in",leave:"dialog-backdrop_leave",leaveFrom:"dialog-backdrop_in",leaveTo:"dialog-backdrop_out"}),(()=>{const i=Te.cloneNode(!0);i.$$keydown=g=>{y(g),h(g)},i.$$click=T;const u=o;return typeof u=="function"?u(i):o=i,G(i,t,!1,!0),C(i,f(p,{class:"dialog__wrapper",enter:"dialog__wrapper_enter",enterFrom:"dialog__wrapper_out",enterTo:"dialog__wrapper_in",leave:"dialog__wrapper_leave",leaveFrom:"dialog__wrapper_in",leaveTo:"dialog__wrapper_out",beforeEnter:_,afterEnter:b,beforeLeave:L,afterLeave:E,get children(){const g=qe.cloneNode(!0),S=d;return typeof S=="function"?S(g):d=g,C(g,()=>e.children),g}})),D(g=>oe(i,{[`dialog_${e.variant}`]:Boolean(e.variant),[e.class]:Boolean(e.class),...e.classList},g)),i})()]}})}K(["click","keydown"]);const Fe=w('<svg viewBox="0 0 22 22" fill="currentColor"><path d="m17.42 5.88-1.3-1.3L11 9.71 5.88 4.58l-1.3 1.3L9.71 11l-5.13 5.12 1.3 1.3L11 12.29l5.12 5.13 1.3-1.3L12.29 11l5.13-5.12Z"></path></svg>'),Re=(e={})=>(()=>{const t=Fe.cloneNode(!0);return G(t,e,!0,!0),t})();function Oe(e,t){const[n,a]=$(0),c=()=>typeof e=="function"?e():e,r=()=>typeof t=="function"?t():t;let s=0;return B(()=>{if(c()){let v=function(_){d||(d=_),l=_-d,a(Math.min((l+s)/h,1)),l+s<h&&(o=requestAnimationFrame(v))};const h=r();let o=null,d=null,l=0;o=requestAnimationFrame(v),z(()=>{cancelAnimationFrame(o),s+=l})}}),n}const Ae=w('<img alt="#">');function Pe(e){const[t,n]=$(!1),a=ie(()=>e.playing&&t()),c=Oe(a,5e3);return B(()=>{var r;return(r=e.onProgress)==null?void 0:r.call(e,c())}),(()=>{const r=Ae.cloneNode(!0);return r.addEventListener("load",()=>{var s;(s=e.onLoad)==null||s.call(e),n(!0)}),D(()=>O(r,"src",e.src)),r})()}function Me(){const[e,t]=$(null),[n,a]=$(0);return B(()=>{const c=e();if(c){let s=function(){cancelAnimationFrame(r),c.paused||(r=requestAnimationFrame(s)),h()},h=function(){c.duration&&a(c.currentTime/c.duration)},r=null;c.addEventListener("timeupdate",s),z(()=>{cancelAnimationFrame(r),c.removeEventListener("timeupdate",s)})}}),[t,n]}const Be=w("<video muted playsinline disablepictureinpicture></video>");function De(e){let t;const[n,a]=Me();B(()=>{var r;return(r=e.onProgress)==null?void 0:r.call(e,a())}),B(()=>e.playing?t.play():t.pause());function c(){var r;(r=e.onLoad)==null||r.call(e),setTimeout(()=>{console.log("some"),t.play()},1e3)}return(()=>{const r=Be.cloneNode(!0);return(s=>{t=s,n(s)})(r),r.addEventListener("canplaythrough",c),r.addEventListener("canplay",c),D(()=>O(r,"src",e.src)),r})()}const Ne=w('<div class="spinner" role="progressbar"><svg class="spinner__svg" fill="transparent"><circle class="spinner__circle" cx="50%" cy="50%" stroke="currentColor"></circle><circle class="spinner__circle " cx="50%" cy="50%" stroke="currentColor" pathLength="1" stroke-dasharray="0.4 0.6"></circle></svg></div>');function ze(e){e=A({size:40,thickness:4},e);const[,t]=Z(e,["size","thickness","class","classList","style"]);return(()=>{const n=Ne.cloneNode(!0),a=n.firstChild,c=a.firstChild,r=c.nextSibling;return G(n,t,!1,!0),D(s=>{const h={[e.class]:Boolean(e.class),...e.classList},o={...e.style,width:`${e.size}px`,height:`${e.size}px`},d=`${(e.size-e.thickness)/2}px`,l=`${e.thickness}px`,v=`${(e.size-e.thickness)/2}px`,_=`${e.thickness}px`;return s._v$=oe(n,h,s._v$),s._v$2=ue(n,o,s._v$2),d!==s._v$3&&O(c,"r",s._v$3=d),l!==s._v$4&&O(c,"stroke-width",s._v$4=l),v!==s._v$5&&O(r,"r",s._v$5=v),_!==s._v$6&&O(r,"stroke-width",s._v$6=_),s},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),n})()}const Ie=w('<svg viewBox="0 0 20 20" fill="currentColor"><path d="M2.5 16.67 18.07 10 2.5 3.33v5.19L13.61 10 2.5 11.48v5.19Z"></path></svg>'),ne=(e={})=>(()=>{const t=Ie.cloneNode(!0);return G(t,e,!0,!0),t})();const je=w('<div class="story"></div>'),We=w('<a target="_blank" class="story__button">\u041E\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u0437\u0430\u044F\u0432\u043A\u0443 </a>'),Xe=w('<button type="button" class="story__button">\u041E\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u0437\u0430\u044F\u0432\u043A\u0443 </button>');function He(e){const[,t]=Z(e,["onRequestForm"]),[n,a]=$(!1);return(()=>{const c=je.cloneNode(!0);return C(c,f(Q,A({get component(){return e.type==="image"?Pe:De}},t,{onLoad:()=>a(!0)})),null),C(c,f(U,{get when(){return n()},get fallback(){return f(ze,{class:"story__spinner",size:36,thickness:2})},get children(){return ae(()=>!!e.link,!0)()?(()=>{const r=We.cloneNode(!0);return r.firstChild,C(r,f(ne,{}),null),D(()=>O(r,"href",e.link)),r})():(()=>{const r=Xe.cloneNode(!0);return r.firstChild,fe(r,"click",e.onRequestForm,!0),C(r,f(ne,{}),null),r})()}}),null),c})()}K(["click"]);function Ve(e={}){const[t,n]=$(null);return B(()=>{if(!t())return;var a=t(),c,r,s,h=50,o=250;function d(_){const b=_.changedTouches[0];c=b.clientX,r=b.clientY,s=Date.now()}function l(_){}function v(_){var x,i,u,g,S;const b=_.changedTouches[0],L=b.clientX-c,E=b.clientY-r,T=Date.now()-s;let y="none";T<=o&&(Math.abs(L)>=h&&Math.abs(L)>Math.abs(E)?y=L<0?"left":"right":Math.abs(E)>=h&&Math.abs(E)>Math.abs(L)&&(y=E<0?"up":"down")),y==="left"?(x=e.onSwipedLeft)==null||x.call(e):y==="right"?(i=e.onSwipedRight)==null||i.call(e):y==="up"?(u=e.onSwipedUp)==null||u.call(e):y==="down"&&((g=e.onSwipedDown)==null||g.call(e)),y!=="none"&&((S=e.onSwiped)==null||S.call(e,{dir:y}))}a.addEventListener("touchstart",d),a.addEventListener("touchmove",l),a.addEventListener("touchend",v),z(()=>{a.removeEventListener("touchstart",d),a.removeEventListener("touchmove",l),a.removeEventListener("touchend",v)})}),n}const Ye=w('<div class="form"></div>');function Ue(e){function t(n){const a=document.querySelector(".request"),c=a.parentElement;n.appendChild(a),z(()=>{c.appendChild(a)})}return f(ce,A({variant:"form"},e,{get children(){const n=Ye.cloneNode(!0),a=t;return typeof a=="function"?a(n):t=n,n}}))}const Ke=w('<div class="stories"><div class="stories__header"><div class="stories__bars"></div><div class="stories__row"><div class="stories__user"><img alt="" class="stories__ava"><div class="stories__info"><h3 class="stories__username"></h3><time class="stories__time"></time></div></div><button type="button" class="stories__close" aria-label="\u0417\u0430\u043A\u0440\u044B\u0442\u044C \u0441\u0442\u043E\u0440\u0438\u0441"></button></div></div><div class="stories__overlay"></div></div>'),Ze=w('<div class="stories__bar"></div>');function Ge(e){const[,t]=Z(e,["ava","username","time","stories","onOpen","onOpened","onClose","onClosed"]),[n,a]=$(0),[c,r]=$(!0),[s,h]=$(0),[o,d]=$(!1),[l,v]=$(!1),_=Ve({onSwiped({dir:i}){},onSwipedRight:L,onSwipedLeft:b,onSwipedDown(){var i;(i=e.onRequestClose)==null||i.call(e)}});function b(){a((n()+1)%e.stories.length)}function L(){a((n()-1+e.stories.length)%e.stories.length)}function E(i){h(i),i===1&&b()}function T(i){console.log("onClick");const u=i.currentTarget.getBoundingClientRect();i.clientX-u.left<u.width/2?L():b(),i.preventDefault()}const[y,x]=$(0);return re(()=>{function i(){x(document.documentElement.clientHeight)}i(),window.addEventListener("resize",i),z(()=>{window.removeEventListener("resize",i)})}),[f(ce,A(t,{variant:"stories",closeOnBackdrop:!1,onOpen:()=>{var i;(i=e.onOpen)==null||i.call(e)},onOpened:()=>{var i;d(!0),(i=e.onOpened)==null||i.call(e)},onClose:()=>{var i;r(!1),(i=e.onClose)==null||i.call(e)},onClosed:()=>{var i;a(0),d(!1),h(0),r(!0),(i=e.onClosed)==null||i.call(e)},get children(){const i=Ke.cloneNode(!0),u=i.firstChild,g=u.firstChild,S=g.nextSibling,I=S.firstChild,j=I.firstChild,V=j.nextSibling,W=V.firstChild,Y=W.nextSibling,F=I.nextSibling,R=u.nextSibling;return C(g,f(ve,{get each(){return e.stories},children:(m,q)=>(()=>{const k=Ze.cloneNode(!0);return D(()=>k.style.setProperty("--progress",q()<n()?1:q()===n()?s():0)),k})()})),C(W,()=>e.username),C(Y,()=>e.time),F.$$click=()=>{var m;return(m=e.onRequestClose)==null?void 0:m.call(e)},C(F,f(Re,{"aria-hidden":"true"})),_(R),R.$$pointerup=T,C(i,f(U,{get when(){return ae(()=>!!o(),!0)()&&e.stories[n()]},keyed:!0,children:m=>f(He,A(m,{get playing(){return c()},onProgress:E,onRequestForm:()=>v(!0)}))}),null),D(m=>{const q=y(),k=e.ava;return q!==m._v$&&i.style.setProperty("--height",m._v$=q),k!==m._v$2&&O(j,"src",m._v$2=k),m},{_v$:void 0,_v$2:void 0}),i}})),f(Ue,{get open(){return l()},onRequestClose:()=>v(!1),onOpen:()=>r(!1),onClose:()=>r(!0)})]}K(["click","pointerup"]);async function Je(){var d;const e=document.querySelector(".ava");if(!e)return;const t=((d=window.data)==null?void 0:d.stories)||[];t.length||e.classList.add("ava_empty");const n=e.querySelector("video.ava__media"),a=t.find(l=>l.type==="video");n&&a&&(n.src=a.src,n.addEventListener("canplaythrough",()=>{e.classList.add("ava_loaded")}));const[c,r]=$(!1),s=e.querySelector(".ava__stories");e.querySelector(".ava__picture").addEventListener("click",l=>{r(!0),l.preventDefault()}),e.querySelector(".ava__share").addEventListener("click",async()=>{var l;try{await navigator.share((l=window.data)==null?void 0:l.share)}catch(v){console.log(v)}}),ge(()=>f(Ge,{get ava(){var l;return(l=window.data)==null?void 0:l.ava},get username(){var l;return(l=window.data)==null?void 0:l.username},get time(){var l;return(l=window.data)==null?void 0:l.time},stories:t,get open(){return c()},onRequestClose:()=>r(!1),onOpen:()=>n==null?void 0:n.pause(),onClose:()=>n==null?void 0:n.play()}),s)}Je();function Qe(){const e=document.querySelector(".request");if(!e)return;e.querySelector(".request__form");const t=e.querySelector(".request__input");t.type==="tel"&&he(t,{mask:"+{7} 000 000 00-00"})}Qe();
