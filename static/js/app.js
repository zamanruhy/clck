import{c as _,a as I,b as f,D as te,m as x,S as V,d as me,u as $e,e as oe,s as J,f as ue,o as de,g as W,h as Q,i as E,j,k as fe,t as C,l as A,n as re,p as ye,q as be,F as we,r as Ce,I as ke}from"./vendor.js";const ve=me();function Ee(e){const t=$e(ve);if(t)return t;throw new Error(`<${e}> must be used inside a <Transition>`)}function R(e,t){const n=t.filter(s=>s);n.length&&e.classList.add(...n)}function P(e,t){const n=t.filter(s=>s);n.length&&e.classList.remove(...n)}function ne(e){const t=Ee("TransitionChild"),[n,s]=_(t.show),[a,r]=_();let l=!0;function $(o,d){var c,v,y,M,S,F,D,B,z,u,g,m,q,Y,K,U,Z,G;if(d){if(l){const i=(v=(c=e.enter)==null?void 0:c.split(" "))!=null?v:[],h=(M=(y=e.enterFrom)==null?void 0:y.split(" "))!=null?M:[],w=(F=(S=e.enterTo)==null?void 0:S.split(" "))!=null?F:[],T=(B=(D=e.entered)==null?void 0:D.split(" "))!=null?B:[],b=()=>{var k;P(o,i),P(o,w),R(o,T),(k=e.afterEnter)==null||k.call(e)};(z=e.beforeEnter)==null||z.call(e),R(o,i),R(o,h),requestAnimationFrame(()=>{P(o,h),R(o,w),o.addEventListener("transitionend",b,{once:!0}),o.addEventListener("animationend",b,{once:!0})})}}else{const i=(g=(u=e.leave)==null?void 0:u.split(" "))!=null?g:[],h=(q=(m=e.leaveFrom)==null?void 0:m.split(" "))!=null?q:[],w=(K=(Y=e.leaveTo)==null?void 0:Y.split(" "))!=null?K:[],T=(Z=(U=e.entered)==null?void 0:U.split(" "))!=null?Z:[];(G=e.beforeLeave)==null||G.call(e),P(o,T),R(o,i),R(o,h),requestAnimationFrame(()=>{P(o,h),R(o,w)});const b=()=>{var k;P(o,i),P(o,w),s(!1),(k=e.afterLeave)==null||k.call(e)};o.addEventListener("transitionend",b,{once:!0}),o.addEventListener("animationend",b,{once:!0})}}return I(()=>{const o=t.show;o&&s(!0);const d=a();d instanceof HTMLElement?$(d,o):l=!0}),f(V,{get when(){var o;return(o=e.unmount)!=null?o:!0},get fallback(){return f(te,x({get component(){var o;return(o=e.as)!=null?o:"div"}},()=>ie(e,["as","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","unmount","afterEnter","afterLeave","appear","beforeEnter","beforeLeave","entered","ref"]),{ref(o){const d=le(e,c=>{r(()=>c)});typeof d=="function"&&d(o)},get children(){return e.children}}))},get children(){return f(V,{get when(){return n()},get children(){return f(te,x({get component(){var o;return(o=e.as)!=null?o:"div"}},()=>ie(e,["as","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","unmount","afterEnter","afterLeave","appear","beforeEnter","beforeLeave","entered","ref"]),{ref(o){const d=le(e,c=>{r(()=>c)});typeof d=="function"&&d(o)},get children(){return e.children}}))}})}})}function Le(e){const t=ie(e,["show"]);return f(ve.Provider,{value:{get show(){return e.show}},get children(){return f(ne,t)}})}function xe(e){return typeof e=="function"}function le(e,t){return n=>{"ref"in e&&xe(e.ref)&&e.ref(n),t(n)}}function ie(e,t){const n={},s=Object.keys(e);for(let a=0,r=s.length;a<r;a+=1){const l=s[a];t.includes(l)||Object.defineProperty(n,l,{get(){return e[l]},configurable:!0,enumerable:!0})}return n}const N=new Set;let H=null,ee=null;function Se(){return{registerModal:qe,unregisterModal:Fe,trapFocus:Me}}function qe(e){N.has(e)||(N.add(e),N.size===1&&(Oe(),document.body.style.overflow="hidden"))}function Fe(e){!N.has(e)||(N.delete(e),N.size===0&&(Re(),document.body.style.overflow=""))}function Te(){return window.innerWidth>document.documentElement.clientWidth}function Oe(){!Te()||(H=[document.body,...Array.from(document.querySelectorAll("[data-fixed]"))],H.forEach(e=>{const t=e.getAttribute("data-fixed")||"padding",n=e.style[`${t}Right`],s=getComputedStyle(e)[`${t}Right`];e.setAttribute(`data-${t}-right`,n),e.style[`${t}Right`]=`${parseFloat(s)+Pe()}px`}))}function Re(){H!==null&&(H.forEach(e=>{const t=e.getAttribute("data-fixed")||"padding";e.style[`${t}Right`]=e.getAttribute(`data-${t}-right`),e.removeAttribute(`data-${t}-right`)}),H=null)}function Pe(){if(ee===null){const e=document.createElement("div");e.style.cssText=`
      width: 100px;
      height: 100px;
      position: absolute;
      overflow: scroll;
      top: -9999px`,document.body.appendChild(e),ee=e.getBoundingClientRect().width-e.clientWidth,document.body.removeChild(e)}return ee}function Ae(e){const t=["a[href]","area[href]",'input:not([type="hidden"]):not([type="radio"]):not([disabled])','input[type="radio"]:not([disabled]):checked',"select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","audio[controls]","video[controls]","[contenteditable]","[tabindex]"].map(n=>`${n}:not([tabindex^="-"])`).join(", ");return Array.from(e.querySelectorAll(t)).filter(n=>n.offsetWidth||n.offsetHeight||n.getClientRects().length)}function Me(e){if(e.key!=="Tab")return;const t=Ae(e.currentTarget);if(t.length===0){e.preventDefault();return}const n=t[0],s=t[t.length-1],a=document.activeElement;e.shiftKey?(a===n||a===e.currentTarget)&&(s.focus(),e.preventDefault()):a===s&&(n.focus(),e.preventDefault())}const De=C('<div class="dialog__content"></div>'),Be=C('<div class="dialog" role="dialog" aria-modal="true" tabindex="-1"></div>');function ge(e){e=x({open:!1,closeOnBackdrop:!0,closeOnEscape:!0},e);const[,t]=J(e,["class","classList","open","closeOnBackdrop","closeOnEscape","children","variant","onOpen","onOpened","onClose","onClosed","onRequestClose"]),[n,s]=_(!1),a=ue(()=>e.open&&n()),{registerModal:r,unregisterModal:l,trapFocus:$}=Se();let o,d,c=null;const v={};async function y(){var u;(u=e.onOpen)==null||u.call(e),queueMicrotask(()=>{c=c||document.activeElement,r(v)})}function M(){var u;(u=e.onOpened)==null||u.call(e),z()}function S(){var u;(u=e.onClose)==null||u.call(e)}async function F(){var u,g;(u=e.onClosed)==null||u.call(e),(g=c.focus)==null||g.call(c,{preventScroll:!0}),c=null,l(v)}function D(u){var g;e.closeOnBackdrop&&!d.contains(u.target)&&((g=e.onRequestClose)==null||g.call(e))}function B(u){var g;e.closeOnEscape&&u.key==="Escape"&&((g=e.onRequestClose)==null||g.call(e))}function z(){o.contains(document.activeElement)||o.focus()}return de(()=>{s(!0),W(()=>{l(v)})}),f(Le,{get show(){return a()},as:"span",get children(){return[f(ne,{class:"dialog-backdrop",get classList(){return{[`dialog-backdrop_${e.variant}`]:Boolean(e.variant)}},enter:"dialog-backdrop_enter",enterFrom:"dialog-backdrop_out",enterTo:"dialog-backdrop_in",leave:"dialog-backdrop_leave",leaveFrom:"dialog-backdrop_in",leaveTo:"dialog-backdrop_out"}),(()=>{const u=Be.cloneNode(!0);u.$$keydown=m=>{B(m),$(m)},u.$$click=D;const g=o;return typeof g=="function"?g(u):o=u,Q(u,t,!1,!0),E(u,f(ne,{class:"dialog__wrapper",enter:"dialog__wrapper_enter",enterFrom:"dialog__wrapper_out",enterTo:"dialog__wrapper_in",leave:"dialog__wrapper_leave",leaveFrom:"dialog__wrapper_in",leaveTo:"dialog__wrapper_out",beforeEnter:y,afterEnter:M,beforeLeave:S,afterLeave:F,get children(){const m=De.cloneNode(!0),q=d;return typeof q=="function"?q(m):d=m,E(m,()=>e.children),m}})),j(m=>fe(u,{[`dialog_${e.variant}`]:Boolean(e.variant),[e.class]:Boolean(e.class),...e.classList},m)),u})()]}})}oe(["click","keydown"]);const ze=C('<svg viewBox="0 0 22 22" fill="currentColor"><path d="m17.42 5.88-1.3-1.3L11 9.71 5.88 4.58l-1.3 1.3L9.71 11l-5.13 5.12 1.3 1.3L11 12.29l5.12 5.13 1.3-1.3L12.29 11l5.13-5.12Z"></path></svg>'),Ne=(e={})=>(()=>{const t=ze.cloneNode(!0);return Q(t,e,!0,!0),t})();function Ie(e,t){const[n,s]=_(0),a=()=>typeof e=="function"?e():e,r=()=>typeof t=="function"?t():t;let l=0;return I(()=>{if(a()){let v=function(y){d||(d=y),c=y-d,s(Math.min((c+l)/$,1)),c+l<$&&(o=requestAnimationFrame(v))};const $=r();let o=null,d=null,c=0;o=requestAnimationFrame(v),W(()=>{cancelAnimationFrame(o),l+=c})}}),n}const je=C('<img alt="#">');function We(e){const[t,n]=_(!1),s=ue(()=>e.playing&&t()),a=Ie(s,5e3);return I(()=>{var r;return(r=e.onProgress)==null?void 0:r.call(e,a())}),(()=>{const r=je.cloneNode(!0);return r.addEventListener("load",()=>{var l;(l=e.onLoad)==null||l.call(e),n(!0)}),j(()=>A(r,"src",e.src)),r})()}function Xe(){const[e,t]=_(null),[n,s]=_(0);return I(()=>{const a=e();if(a){let l=function(){cancelAnimationFrame(r),a.paused||(r=requestAnimationFrame(l)),$()},$=function(){a.duration&&s(a.currentTime/a.duration)},r=null;a.addEventListener("timeupdate",l),W(()=>{cancelAnimationFrame(r),a.removeEventListener("timeupdate",l)})}}),[t,n]}function He(e){const t=window.videoEl,[n,s]=Xe();I(()=>{var r;return(r=e.onProgress)==null?void 0:r.call(e,s())}),I(()=>e.playing?t.play():t.pause());function a(){var r;(r=e.onLoad)==null||r.call(e)}return n(t),W(()=>{t.pause(),Object.assign(t,{src:t._src,muted:!0,currentTime:0,onloadeddata:null,oncanplay:null,oncanplaythrough:null}),window.avaPicture.appendChild(t)}),re(()=>Object.assign(t,{muted:!1,currentTime:0,src:e.src,onloadeddata:a,oncanplay:a,oncanplaythrough:a}))}const Ve=C('<div class="spinner" role="progressbar"><svg class="spinner__svg" fill="transparent"><circle class="spinner__circle" cx="50%" cy="50%" stroke="currentColor"></circle><circle class="spinner__circle " cx="50%" cy="50%" stroke="currentColor" pathLength="1" stroke-dasharray="0.4 0.6"></circle></svg></div>');function Ye(e){e=x({size:40,thickness:4},e);const[,t]=J(e,["size","thickness","class","classList","style"]);return(()=>{const n=Ve.cloneNode(!0),s=n.firstChild,a=s.firstChild,r=a.nextSibling;return Q(n,t,!1,!0),j(l=>{const $={[e.class]:Boolean(e.class),...e.classList},o={...e.style,width:`${e.size}px`,height:`${e.size}px`},d=`${(e.size-e.thickness)/2}px`,c=`${e.thickness}px`,v=`${(e.size-e.thickness)/2}px`,y=`${e.thickness}px`;return l._v$=fe(n,$,l._v$),l._v$2=ye(n,o,l._v$2),d!==l._v$3&&A(a,"r",l._v$3=d),c!==l._v$4&&A(a,"stroke-width",l._v$4=c),v!==l._v$5&&A(r,"r",l._v$5=v),y!==l._v$6&&A(r,"stroke-width",l._v$6=y),l},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),n})()}const Ke=C('<svg viewBox="0 0 20 20" fill="currentColor"><path d="M2.5 16.67 18.07 10 2.5 3.33v5.19L13.61 10 2.5 11.48v5.19Z"></path></svg>'),ce=(e={})=>(()=>{const t=Ke.cloneNode(!0);return Q(t,e,!0,!0),t})();const Ue=C('<div class="story"></div>'),Ze=C('<a target="_blank" class="story__button">\u041E\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u0437\u0430\u044F\u0432\u043A\u0443 </a>'),Ge=C('<button type="button" class="story__button">\u041E\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u0437\u0430\u044F\u0432\u043A\u0443 </button>');function Je(e){const[,t]=J(e,["onRequestForm"]),[n,s]=_(!1);return(()=>{const a=Ue.cloneNode(!0);return E(a,f(te,x({get component(){return e.type==="image"?We:He}},t,{onLoad:()=>s(!0)})),null),E(a,f(V,{get when(){return n()},get fallback(){return f(Ye,{class:"story__spinner",size:36,thickness:2})},get children(){return re(()=>!!e.link,!0)()?(()=>{const r=Ze.cloneNode(!0);return r.firstChild,E(r,f(ce,{}),null),j(()=>A(r,"href",e.link)),r})():(()=>{const r=Ge.cloneNode(!0);return r.firstChild,be(r,"click",e.onRequestForm,!0),E(r,f(ce,{}),null),r})()}}),null),a})()}oe(["click"]);const Qe=C('<div class="form"></div>');function pe(e){function t(n){const s=document.querySelector(".request"),a=s.parentElement;n.appendChild(s),W(()=>{a.appendChild(s)})}return f(ge,x({variant:"form"},e,{get children(){const n=Qe.cloneNode(!0),s=t;return typeof s=="function"?s(n):t=n,n}}))}const et=C('<div class="stories"><div class="stories__header"><div class="stories__bars"></div><div class="stories__row"><div class="stories__user"><img alt="" class="stories__ava"><div class="stories__info"><h3 class="stories__username"></h3><time class="stories__time"></time></div></div><button type="button" class="stories__close" aria-label="\u0417\u0430\u043A\u0440\u044B\u0442\u044C \u0441\u0442\u043E\u0440\u0438\u0441"></button></div></div><div class="stories__overlay"></div></div>'),tt=C('<div class="stories__bar"></div>');function nt(e){const[,t]=J(e,["ava","username","time","stories","onOpen","onOpened","onClose","onClosed"]),[n,s]=_(0),[a,r]=_(!0),[l,$]=_(0),[o,d]=_(!1),[c,v]=_(!1),[y,M]=_(1);function S(){var i;n()<e.stories.length-1?s((n()+1)%e.stories.length):(i=e.onRequestClose)==null||i.call(e)}function F(){n()!==0?s((n()-1+e.stories.length)%e.stories.length):M(y()+1)}function D(i){$(i),i===1&&S()}const[B,z]=_(0);de(()=>{function i(){z(document.documentElement.clientHeight)}i(),window.addEventListener("resize",i),W(()=>{window.removeEventListener("resize",i)})});var u,g,m,q=50,Y=250;function K(i){i.target.setPointerCapture(i.pointerId),u=i.clientX,g=i.clientY,m=Date.now(),i.preventDefault()}function U(i){i.preventDefault()}function Z(i){var k;const h=i.clientX-u,w=i.clientY-g,T=Date.now()-m;let b="none";T<=Y&&(Math.abs(h)>=q&&Math.abs(h)>Math.abs(w)?b=h<0?"left":"right":Math.abs(w)>=q&&Math.abs(w)>Math.abs(h)&&(b=w<0?"up":"down")),b==="left"?S():b==="right"?F():b==="down"?(k=e.onRequestClose)==null||k.call(e):G(i),i.preventDefault()}function G(i){const h=i.currentTarget.getBoundingClientRect();i.clientX-h.left<h.width/2?F():S(),i.preventDefault()}return[f(ge,x(t,{variant:"stories",closeOnBackdrop:!1,onOpen:()=>{var i;(i=e.onOpen)==null||i.call(e)},onOpened:()=>{var i;d(!0),(i=e.onOpened)==null||i.call(e)},onClose:()=>{var i;r(!1),(i=e.onClose)==null||i.call(e)},onClosed:()=>{var i;s(0),d(!1),$(0),r(!0),(i=e.onClosed)==null||i.call(e)},get children(){const i=et.cloneNode(!0),h=i.firstChild,w=h.firstChild,T=w.nextSibling,b=T.firstChild,k=b.firstChild,he=k.nextSibling,se=he.firstChild,_e=se.nextSibling,ae=b.nextSibling,p=h.nextSibling;return E(w,f(we,{get each(){return e.stories},children:(L,O)=>(()=>{const X=tt.cloneNode(!0);return j(()=>X.style.setProperty("--progress",O()<n()?1:O()===n()?l():0)),X})()})),E(se,()=>e.username),E(_e,()=>e.time),ae.$$click=()=>{var L;return(L=e.onRequestClose)==null?void 0:L.call(e)},E(ae,f(Ne,{"aria-hidden":"true"})),p.$$pointerup=Z,p.$$pointermove=U,p.$$pointerdown=K,E(i,f(V,{get when(){return y()},keyed:!0,children:L=>f(V,{get when(){return re(()=>!!(y()&&o()),!0)()&&e.stories[n()]},keyed:!0,children:O=>f(Je,x(O,{get playing(){return a()},onProgress:D,onRequestForm:()=>v(!0)}))})}),null),j(L=>{const O=B(),X=e.ava;return O!==L._v$&&i.style.setProperty("--height",L._v$=O),X!==L._v$2&&A(k,"src",L._v$2=X),L},{_v$:void 0,_v$2:void 0}),i}})),f(pe,{get open(){return c()},onRequestClose:()=>v(!1),onOpen:()=>r(!1),onClose:()=>r(!0)})]}oe(["click","pointerdown","pointermove","pointerup"]);async function it(){var d;const e=document.querySelector(".ava");if(!e)return;const t=((d=window.data)==null?void 0:d.stories)||[];t.length||e.classList.add("ava_empty");const n=e.querySelector("video.ava__media"),s=t.find(c=>c.type==="video");n&&s&&(n.src=s.src,n.addEventListener("canplaythrough",()=>{e.classList.add("ava_loaded")}),window.videoEl.src=window.videoEl._src=s.src);const[a,r]=_(!1),l=e.querySelector(".ava__stories");e.querySelector(".ava__picture").addEventListener("click",c=>{c.preventDefault(),r(!0),window.videoEl.play()}),e.querySelector(".ava__share").addEventListener("click",async()=>{var c;try{await navigator.share((c=window.data)==null?void 0:c.share)}catch(v){console.log(v)}}),Ce(()=>f(nt,x(()=>{var c;return(c=window.data)==null?void 0:c.summary},{stories:t,get open(){return a()},onRequestClose:()=>r(!1),onOpen:()=>n==null?void 0:n.pause(),onClose:()=>n==null?void 0:n.play()})),l)}it();function ot(){const e=document.querySelector(".request");if(!e)return;e.querySelector(".request__form");const t=e.querySelector(".request__input");t.type==="tel"&&ke(t,{mask:"+{7} 000 000 00-00"})}ot();
